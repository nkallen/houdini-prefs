{"body": [{"indent": 0, "text": ["Smoke Solver (Sparse)"], "type": "title", "extent": [87, 113], "level": 0}, {"indent": 0, "type": "summary", "extent": [113, 261], "text": ["Performs a sparse smoke simulation on the given object. This is a slightly\nlower-level solver that is the basis for the sparse pyro solver."]}, {"indent": 0, "type": "para", "extent": [261, 391], "text": ["See ", {"text": ["Pyro look development"], "fullpath": "/pyro/pyro_look", "scheme": null, "type": "link", "value": "/pyro/pyro_look"}, " for information on using the\nparameters to achieve different flame and smoke looks. "]}, {"indent": 0, "type": "para", "extent": [391, 630], "text": ["The Smoke Solver is able to perform the basic steps required for a smoke\nsimulation. ", {"text": ["Pyro Solver (Sparse)"], "fullpath": "/nodes/dop/pyrosolver_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/pyrosolver_sparse"}, " extends the\nfunctionality of this solver by adding flame simulation along with extra shaping\ncontrols."]}, {"body": [{"indent": 0, "type": "para", "extent": [655, 985], "text": ["The essential building blocks of a smoke simulation are the object, solver, and\nsourcing. The ", {"text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/smokeobject_sparse"}, " node creates\na dynamic object containing the required fields, which are then evolved by the\nsolver as the simulation proceeds. The simplest smoke simulation needs the\nfollowing data:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [985, 1061], "text": [{"text": ["density"], "type": "code"}, " scalar field that contains where and how much smoke is present;"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1061, 1129], "text": [{"text": ["temperature"], "type": "code"}, " scalar field that\u2019s used for buoyancy calculations;"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1129, 1204], "text": [{"text": ["vel"], "type": "code"}, " vector field that captures the instantaneous motion of the smoke."]}], "container": true, "type": "bullet_group"}, {"indent": 0, "type": "para", "extent": [1204, 1580], "text": ["This solver takes care of ensuring these fields change in a manner consistent\nwith smoke, but sourcing is responsible for injecting these quantities through\nthe course of the simulation. For example, you may want to continuously add to\n", {"text": ["density"], "type": "code"}, " at the soot source or ", {"text": ["temperature"], "type": "code"}, " to cause hot regions to rise. See\n", {"text": ["pyro sourcing"], "fullpath": "/dyno/fluid_sourcing", "scheme": null, "type": "link", "value": "/dyno/fluid_sourcing"}, " for more information."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1586, 1692], "text": ["Tools under the ", {"text": ["Sparse Pyro FX"], "type": "ui"}, " shelf can be used to create setups\n    involving the pyro solver."]}], "indent": 0, "role": "item", "type": "note", "extent": [1580, 1586]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "level": 2, "text": ["Setting Up"], "extent": [630, 655], "container": true, "type": "h", "id": "setup"}, {"body": [{"indent": 0, "type": "para", "extent": [1716, 2372], "text": ["By default, this solver operates in ", {"text": ["sparse"], "type": "em"}, " mode; that is, the needed\ncalculations are performed only in the areas of interest, as governed by the\n", {"text": ["active"], "type": "code"}, " field. This region is built by looking at the ", {"text": ["Reference Fields"], "type": "ui"}, "\nparameter under the ", {"text": ["Resizing"], "type": "ui"}, " subtab of the ", {"text": ["Advanced"], "type": "ui"}, " tab: positive areas\nof the specified fields are flagged as ", {"text": ["active"], "type": "em"}, ". This intermediate active region\nis then dilated to provide a buffer for smoke to expand into. With the\n", {"text": ["Reference Fields"], "type": "ui"}, " set to ", {"text": ["density"], "type": "code"}, ", for example, the solver will run its\noperations near areas which have some soot, thereby concentrating the\ncomputational effort to the smoke\u2019s visible region."]}, {"indent": 0, "type": "para", "extent": [2372, 2650], "text": ["Inactive areas in sparse mode are treated as vacuum that smoke is free to move\ninto. As such, if there are two puffs of smoke blowing at each other, they will\nbe completely invisible to one another until they come sufficiently close for\ntheir disjoint active regions to merge."]}, {"indent": 0, "type": "para", "extent": [2650, 2999], "text": ["When ", {"text": ["Enable Sparse Solving"], "type": "ui"}, " is disabled under the aforementioned tab, the\nsolver will work in ", {"text": ["dense"], "type": "em"}, " mode, performing a full global solve everywhere\nwithin the domain. With the previous example involving two puffs of smoke, they\nwill be immediately aware of each other\u2019s presence. However, dense mode can be\nsubstantially slower in some cases."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3004, 3175], "text": ["You can enable ", {"text": ["Active Region"], "type": "ui"}, " visualization under the ", {"text": ["Guides"], "type": "ui"}, " tab of\n    the ", {"text": ["smoke object"], "fullpath": "/nodes/dop/smokeobject_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/smokeobject_sparse"}, " to see the active simulation\n    areas."]}], "indent": 0, "role": "item", "type": "tip", "extent": [2999, 3004]}], "container": true, "role": "item_group", "type": "tip_group"}], "indent": 0, "level": 2, "text": ["Sparsity"], "extent": [1692, 1716], "container": true, "type": "h", "id": "sparse"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3209, 3271], "text": ["A ", {"text": ["smoke object"], "fullpath": "/nodes/dop/smokeobject_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/smokeobject_sparse"}, " to work on."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3281, 3390], "text": ["When working in sparse mode, ", {"text": ["Enable Sparse Solving"], "type": "ui"}, " must be enabled\n        on the smoke object."]}], "indent": 4, "role": "item", "type": "note", "extent": [3271, 3281]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Objects"], "attrs": {"id": "input0"}, "extent": [3183, 3193], "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [3417, 3665], "text": ["Nodes attached to this input will be able to use the smoke\u2019s accurate\n    velocity field. The ", {"text": ["Gas Advect"], "fullpath": "/nodes/dop/gasadvect", "scheme": "Node", "type": "link", "value": "/nodes/dop/gasadvect"}, " node can be hooked up,\n    for instance, to advect the points of an attached geometry data along with\n    the smoke."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3675, 3801], "text": ["It is not safe to modify the velocity through this input; use the\n        ", {"text": ["Sourcing"], "type": "ui"}, " or ", {"text": ["Forces"], "type": "ui"}, " inputs instead."]}], "indent": 4, "role": "item", "type": "note", "extent": [3665, 3675]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Advection"], "attrs": {"id": "input1"}, "extent": [3390, 3401], "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [3827, 4080], "text": ["This input should be used to modify the simulation fields, by sourcing with\n    a ", {"text": ["Volume Source"], "fullpath": "/nodes/dop/volumesource", "scheme": "Node", "type": "link", "value": "/nodes/dop/volumesource"}, ", for example. It is important to\n    perform any sourcing that affects the active region in sparse mode through\n    this input."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4090, 4276], "text": ["The ", {"text": ["active"], "type": "code"}, " field at this point is not up-to-date; thus, if you want to\n        perform an operation that can be done sparsely, it is best to use the\n        ", {"text": ["Forces"], "type": "ui"}, " input."]}], "indent": 4, "role": "item", "type": "note", "extent": [4080, 4090]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Sourcing"], "attrs": {"id": "input2"}, "extent": [3801, 3811], "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [4300, 4484], "text": ["Microsolvers attached to this input will be run before the final pressure\n    projection. At this point, the ", {"text": ["active"], "type": "code"}, " field can be used as a stencil for\n    DOPs that support it."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4494, 4680], "text": ["Before the nodes attached to this input are executed, the ", {"text": ["active"], "type": "code"}, " field\n        is updated to account for any operations that were performed in the\n        ", {"text": ["Sourcing"], "type": "ui"}, " input."]}], "indent": 4, "role": "item", "type": "note", "extent": [4484, 4494]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Forces"], "attrs": {"id": "input3"}, "extent": [4276, 4284], "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [3175, 3183], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4751, 4899], "text": ["A scaling factor for time inside this solver. 1 is normal speed, greater\n    than 1 speeds up the simulation, while less than 1 slows it down."]}], "indent": 0, "text": ["Time Scale"], "role": "item", "attrs": {"id": "timescale"}, "extent": [4719, 4732], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4929, 5216], "text": ["A blur factor on the velocity field. A value of 0 allows adjacent voxels to\n    move in different directions without resistance, creating a more chaotic,\n    turbulent look. Higher values of this parameter result in a more coherent\n    velocity field, creating a more flowing look."]}], "indent": 0, "text": ["Viscosity"], "role": "item", "attrs": {"id": "viscosity"}, "extent": [4899, 4910], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5293, 5482], "text": ["Advection-Reflection attempts to inject energy lost due to pressure\n    projection back into the simulation. Enabling this option may exhibit better\n    vortex retainment in the flow."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5496, 5649], "text": ["No reflection is performed; this is the recommended setting for\n        simulations that involve non-zero goal ", {"text": ["divergence"], "type": "code"}, ", such as explosions."]}], "indent": 4, "type": "dt", "extent": [5482, 5496], "text": ["Disabled"]}, {"body": [{"indent": 8, "type": "para", "extent": [5669, 5936], "text": ["Performs a single pressure projection per timestep and adds the removed\n        velocity components back at the next step. This option is marginally\n        slower than ", {"text": ["Disabled"], "type": "ui"}, ", but requires an extra vector field to be\n        carried between timesteps."]}], "indent": 4, "type": "dt", "extent": [5649, 5669], "text": ["Single-Project"]}, {"body": [{"indent": 8, "type": "para", "extent": [5956, 6156], "text": ["Performs two pressure projections and velocity advection passes per\n        timestep. This option is a lot slower than ", {"text": ["Single-Project"], "type": "ui"}, ", but may\n        yield better results and stability."]}], "indent": 4, "type": "dt", "extent": [5936, 5956], "text": ["Double-Project"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Advection-Reflection"], "role": "item", "attrs": {"id": "adv_vel_reflect"}, "extent": [5245, 5268], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6206, 6417], "text": ["Fraction of the projected velocities to re-inject when\n    ", {"text": ["Advection-Reflection"], "type": "ui"}, " is not set to ", {"text": ["Disabled"], "type": "ui"}, ". Values near 1 will do a\n    better job of conserving energy, but may result in instabilities."]}], "indent": 0, "text": ["Reflection Amount"], "role": "item", "attrs": {"id": "adv_vel_reflectamount"}, "extent": [6156, 6175], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Advection-Reflection"], "extent": [5216, 5245], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6484, 6646], "text": ["A blur factor on the temperature field. Higher values diffuse the\n    temperature out further, emulating the spread of heat from hotter to colder\n    areas."]}], "indent": 0, "text": ["Temperature Diffusion"], "role": "item", "attrs": {"id": "tempdiffusion"}, "extent": [6437, 6461], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6681, 6732], "text": ["How fast the temperature field cools to zero."]}], "indent": 0, "text": ["Cooling Rate"], "role": "item", "attrs": {"id": "tempcooling"}, "extent": [6646, 6660], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6772, 6921], "text": ["Temperature corresponding to value of 0 in the ", {"text": ["temperature"], "type": "code"}, " field (in\n    Kelvin). This represents the ambient temperature of the environment."]}], "indent": 0, "text": ["Ambient Temp (K)"], "role": "item", "attrs": {"id": "temperature0"}, "extent": [6732, 6750], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6963, 7131], "text": ["Temperature corresponding to value of 1 in the ", {"text": ["temperature"], "type": "code"}, " field (in\n    Kelvin). The temperature range is used to calculate strength of the buoyancy\n    force."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [7141, 7316], "text": ["In general, value of ", {"text": ["T"], "type": "code"}, " in the ", {"text": ["temperature"], "type": "code"}, " field corresponds to a\n        temperature of\n        ", {"text": ["Ambient Temp (K) + T * (Reference Temp (K) - Ambient Temp (K))"], "type": "code"}, "."]}], "indent": 4, "role": "item", "type": "note", "extent": [7131, 7141]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Reference Temp (K)"], "role": "item", "attrs": {"id": "temperature1"}, "extent": [6921, 6941], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7354, 7639], "text": ["Hot gas expands, causing it to rise due to lowered density. Acceleration due\n    to buoyancy is calculated using values of the ambient and reference\n    temperatures, as well as the ", {"text": ["Gravity"], "type": "ui"}, " settings. Value of this parameter\n    is used as a multiplier for the buoyancy force."]}], "indent": 0, "text": ["Buoyancy Scale"], "role": "item", "attrs": {"id": "buoyancylift"}, "extent": [7316, 7332], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [7699, 7791], "text": ["Acceleration due to gravity. Stronger gravity results in stronger buoyancy\n    forces."]}], "indent": 0, "text": ["Gravity Acceleration"], "role": "item", "attrs": {"id": "gravaccel"}, "extent": [7657, 7680], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7827, 7930], "text": ["The direction in which gravity pulls. Hotter gas will tend to rise in the\n    opposite direction."]}], "indent": 0, "text": ["Gravity Direction"], "role": "item", "attrs": {"id": "gravdir"}, "extent": [7791, 7810], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 4, "text": ["Gravity"], "extent": [7639, 7657], "container": true, "type": "h", "id": null}], "indent": 0, "level": 3, "text": ["Temperature"], "extent": [6417, 6437], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Simulation"], "extent": [4692, 4719], "container": true, "type": "h", "id": "simtab"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [7988, 8043], "text": ["Use the OpenCL device to accelerate computations."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [8053, 8178], "text": ["OpenCL acceleration is currently only supported in dense mode (when\n        ", {"text": ["Enable Sparse Solving"], "type": "ui"}, " is disabled)."]}], "indent": 4, "role": "item", "type": "note", "extent": [8043, 8053]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Use OpenCL"], "role": "item", "attrs": {"id": "opencl"}, "extent": [7959, 7972], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8217, 8462], "text": ["The solver will take at least this many substeps per frame. If you have\n    unusual forces, you may want to increase this parameter for better\n    stability. Increasing this parameter usually makes the simulation run\n    noticeably slower."]}], "indent": 0, "text": ["Min Substeps"], "role": "item", "attrs": {"id": "minimumsubsteps"}, "extent": [8178, 8192], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8495, 8560], "text": ["The solver will take at most this many substeps per frame. "]}], "indent": 0, "text": ["Max Substeps"], "role": "item", "attrs": {"id": "substeps:"}, "extent": [8462, 8476], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8592, 8920], "text": ["When ", {"text": ["Max Substeps"], "type": "ui"}, " is greater than 1, the solver uses this parameter to\n    determine the number of substeps. The condition is that no substep can allow\n    objects to interpenetrate by more than this many voxels. Higher values let\n    the solver take larger substeps, possibly letting smoke pass through\n    colliders."]}], "indent": 0, "text": ["CFL Condition"], "role": "item", "attrs": {"id": "cflcond"}, "extent": [8560, 8575], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8964, 9327], "text": ["When enabled, all substeps will divide the frame by ", {"text": ["Max Substeps"], "type": "ui"}, ". For\n    example, if ", {"text": ["Max Substeps"], "type": "ui"}, " is set to 4, but the ", {"text": ["CFL Condition"], "type": "ui"}, " only\n    requires 3 substeps, the solver will take frame steps 0.25, 0.5, and 0.25.\n    This option can be useful for re-using input geometry that has been cached\n    to file at increments of 1/", {"text": ["Max Substeps"], "type": "ui"}, "."]}], "indent": 0, "text": ["Quantize to Max Substeps"], "role": "item", "attrs": {"id": "quantize"}, "extent": [8920, 8946], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9375, 9637], "text": ["Delays the actual simulation this many frames after the object creation.\n    Nodes attached to the ", {"text": ["Sourcing"], "type": "ui"}, " input will still be executed. This may be\n    needed if some solve nodes can\u2019t be processed before certain initial\n    conditions have been met."]}], "indent": 0, "text": ["Frames Before Solve"], "role": "item", "attrs": {"id": "framesbeforesolve"}, "extent": [9327, 9348], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [9703, 9889], "text": ["When enabled, size changes to the fields will be done in increments of 16\n    voxels. This is marginally more efficient, but the resultant fields will be\n    larger than necessary."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [9899, 9999], "text": ["Resizing is always done in full tiles when ", {"text": ["Enable Sparse Solving"], "type": "ui"}, " is\n        turned on."]}], "indent": 4, "role": "item", "type": "note", "extent": [9889, 9899]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Resize in Full Tiles"], "role": "item", "attrs": {"id": "resize_fulltiles"}, "extent": [9654, 9677], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [10040, 10393], "text": ["List of fields that determine size of the simulation container. Resizing is\n    done by first computing the bounding box around all voxels of ", {"text": ["Reference\n    Fields"], "type": "ui"}, " that have a positive value, then expanding this intermediate region\n    by ", {"text": ["Padding"], "type": "ui"}, " on all sides. This list of fields is also used to build the\n    active region in sparse mode."]}], "indent": 0, "text": ["Reference Fields"], "role": "item", "attrs": {"id": "resize_fields"}, "extent": [9999, 10017], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [10426, 10659], "text": ["Amount of padding to add to the simulation region around the ", {"text": ["Reference\n    Fields"], "type": "ui"}, ". ", {"text": ["Padding"], "type": "ui"}, " should be as small as possible, but large enough to\n    ensure that moving smoke does not leave the container within a timestep."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [10669, 10806], "text": ["When ", {"text": ["Enable Sparse Solving"], "type": "ui"}, " is turned on, ", {"text": ["Padding"], "type": "ui"}, " also controls\n        size of the buffer built into the active region."]}], "indent": 4, "role": "item", "type": "note", "extent": [10659, 10669]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Padding"], "role": "item", "attrs": {"id": "resize_padding"}, "extent": [10393, 10402], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [10848, 11062], "text": ["By default, the smoke solver will resize ", {"text": ["density"], "type": "code"}, ", ", {"text": ["temperature"], "type": "code"}, ",\n    ", {"text": ["divergence"], "type": "code"}, ", ", {"text": ["active"], "type": "code"}, ", ", {"text": ["vel"], "type": "code"}, ", ", {"text": ["collisionvel"], "type": "code"}, ", and ", {"text": ["flame"], "type": "code"}, " (for pyro\n    only). Additional fields may be resized by specifying them here."]}], "indent": 0, "text": ["Extra Fields"], "role": "item", "attrs": {"id": "resize_extrafields"}, "extent": [10806, 10820], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Resizing"], "extent": [9637, 9654], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [11128, 11233], "text": ["Puts the solver in sparse mode, allowing it to perform its computations only\n    in relevant areas."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [11243, 11362], "text": [{"text": ["Enable Sparse Solving"], "type": "ui"}, " must also be enabled on the smoke object for\n        sparse mode to work correctly."]}], "indent": 4, "role": "item", "type": "note", "extent": [11233, 11243]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Enable Sparse Solving"], "role": "item", "attrs": {"id": "sparse_dosolve"}, "extent": [11080, 11104], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [11400, 11494], "text": ["Rule that determines where the fields specified in ", {"text": ["Fields to Reset"], "type": "ui"}, " are\n    modified."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [11508, 11550], "text": ["Fields are not modified anywhere."]}], "indent": 4, "type": "dt", "extent": [11494, 11508], "text": ["Disabled"]}, {"body": [{"indent": 8, "type": "para", "extent": [11570, 11666], "text": ["Fields are reset in the areas that were previously inactive but are now\n        active."]}], "indent": 4, "type": "dt", "extent": [11550, 11570], "text": ["Newly Occupied"]}, {"body": [{"indent": 8, "type": "para", "extent": [11688, 11784], "text": ["Fields are reset in the areas that were previously active but are now\n        inactive."]}], "indent": 4, "type": "dt", "extent": [11666, 11688], "text": ["Newly Deoccupied"]}, {"body": [{"indent": 8, "type": "para", "extent": [11818, 11921], "text": ["Fields are reset in the areas that changed their activity status in\n        either direction."]}], "indent": 4, "type": "dt", "extent": [11784, 11818], "text": ["Newly Occupied or Deoccupied"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Reset Rule"], "role": "item", "attrs": {"id": "sparse_resetrule"}, "extent": [11362, 11374], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [11966, 12114], "text": ["List of fields to reset, based on the ", {"text": ["Reset Rule"], "type": "ui"}, ". In the regions where\n    they are modified, these fields are set to their initial value."]}], "indent": 0, "text": ["Fields to Reset"], "role": "item", "attrs": {"id": "sparse_resetfields"}, "extent": [11921, 11938], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Sparsity"], "extent": [11062, 11080], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [12177, 12259], "text": ["A list of forces to scale by the value of the ", {"text": ["density"], "type": "code"}, " field at each voxel."]}], "indent": 0, "text": ["Scaled Forces"], "role": "item", "attrs": {"id": "forces_scaled"}, "extent": [12138, 12154], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [12301, 12394], "text": ["A list of forces to apply uniformly to all voxels (ignoring their ", {"text": ["density"], "type": "code"}, "\n    value)."]}], "indent": 0, "text": ["Absolute Forces"], "role": "item", "attrs": {"id": "forces_absolute"}, "extent": [12259, 12276], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["External Forces"], "extent": [12114, 12138], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [12493, 13034], "text": ["The algorithm used to perform advection. ", {"text": ["Semi-Lagrangian"], "type": "ui"}, " is the most\n    basic: it simply traces trajectories through the ", {"text": ["Velocity Field"], "type": "ui"}, " once to\n    update the ", {"text": ["Field"], "type": "ui"}, " values. ", {"text": ["Modified MacCormack"], "type": "ui"}, " carries out an extra\n    tracing step to approximate and compensate for the introduced error; as a\n    result, sharp features of the original field can be better preserved.\n    ", {"text": ["BFECC"], "type": "ui"}, " performs yet another trace to predict the motion of the estimated\n    error, producing the best results at the highest computational cost."]}], "indent": 0, "text": ["Advection Scheme"], "role": "item", "attrs": {"id": "adv_scheme adv_vel_scheme"}, "extent": [12439, 12458], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [13093, 13439], "text": ["The error correction steps of ", {"text": ["Modified MacCormack"], "type": "ui"}, " and ", {"text": ["BFECC"], "type": "ui"}, "\n    advection may introduce final voxel values that lie outside the range of the\n    original field: this can create negative densities or large velocities, for\n    example. When such values are detected, the final field value depends on the\n    setting of this parameter."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [13453, 13487], "text": ["No clamping is performed."]}], "indent": 4, "type": "dt", "extent": [13439, 13453], "text": [{"text": ["None"], "type": "ui"}]}, {"body": [{"indent": 8, "type": "para", "extent": [13502, 13626], "text": ["Clamps the value to ensure it lies in the range that would have been\n        seen by ", {"text": ["Semi-Lagrangian"], "type": "ui"}, " advection."]}], "indent": 4, "type": "dt", "extent": [13487, 13502], "text": [{"text": ["Clamp"], "type": "ui"}]}, {"body": [{"indent": 8, "type": "para", "extent": [13642, 13719], "text": ["Falls back to the value predicted by ", {"text": ["Semi-Lagrangian"], "type": "ui"}, " advection."]}], "indent": 4, "type": "dt", "extent": [13626, 13642], "text": [{"text": ["Revert"], "type": "ui"}]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Clamp Values"], "role": "item", "attrs": {"id": "adv_clampvalues adv_vel_clampvalues"}, "extent": [13034, 13048], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [13769, 14037], "text": ["Apply a smooth blend between non-clamped and clamped values as the advected\n    field approaches the clamping limit. Particularly with the ", {"text": ["Revert"], "type": "ui"}, "\n    option, applying a small amount of ", {"text": ["Blend"], "type": "ui"}, " (0.05-0.1) can reduce grid\n    artifacts in the advected field."]}], "indent": 0, "text": ["Blend"], "role": "item", "attrs": {"id": "adv_blendwidth adv_vel_blendwidth"}, "extent": [13719, 13726], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14096, 14266], "text": ["Controls how trajectories are traced through the velocity field. Options in\n    this menu are listed in the order of increasing accuracy and computational\n    cost."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [14276, 14547], "text": ["With an appropriate value for the ", {"text": ["CFL Condition"], "type": "ui"}, ", ", {"text": ["Forward Euler"], "type": "ui"}, "\n        should be sufficient. Consider using a higher-order ", {"text": ["Trace Method"], "type": "ui"}, " if\n        you need to use a larger ", {"text": ["CFL Condition"], "type": "ui"}, " or if you choose to disable\n        that option altogether."]}], "indent": 4, "role": "item", "type": "note", "extent": [14266, 14276]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Trace Method"], "role": "item", "attrs": {"id": "adv_tracemethod adv_vel_tracemethod"}, "extent": [14037, 14051], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14625, 14931], "text": ["When enabled, trajectory tracing will be done in steps to ensure that the\n    calculated path reflects variations in the velocity field. The step size is\n    governed by the value of this parameter. Particularly, the number of field\n    voxels traveled in each step is equal to the ", {"text": ["CFL Condition"], "type": "ui"}, "."]}], "indent": 0, "text": ["CFL Condition"], "role": "item", "attrs": {"id": "adv_usecfl adv_cflcond adv_vel_usecfl adv_vel_cflcond"}, "extent": [14547, 14562], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14979, 15076], "text": ["Provides a safety limit on the number of steps that can be taken to trace\n    trajectories."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [15086, 15232], "text": ["Step limiting will also always apply to velocity advection, even when\n        ", {"text": ["Use Field Advection Settings for Velocity"], "type": "ui"}, " is disabled."]}], "indent": 4, "role": "item", "type": "note", "extent": [15076, 15086]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Max Steps"], "role": "item", "attrs": {"id": "adv_limitsteps adv_maxsteps"}, "extent": [14931, 14942], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [15289, 15678], "text": ["To minimize the cost of tracing paths through the ", {"text": ["Velocity Field"], "type": "ui"}, ", the\n    target fields are organized into batches (based on their voxel sampling\n    settings), and each batch is advected simultaneously. Enabling this option\n    allows you to limit the number of fields that can be processed in each\n    batch. This is useful for reducing peak memory usage of the advection step."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [15688, 15839], "text": ["The batch settings will also always apply to velocity advection, even\n        when ", {"text": ["Use Field Advection Settings for Velocity"], "type": "ui"}, " is disabled."]}], "indent": 4, "role": "item", "type": "note", "extent": [15678, 15688]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Max Batch Size"], "role": "item", "attrs": {"id": "adv_limitbatch adv_maxbatchsize"}, "extent": [15232, 15248], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [15873, 16042], "text": ["By default, the solver will advect ", {"text": ["density"], "type": "code"}, ", ", {"text": ["temperature"], "type": "code"}, ", ", {"text": ["vel"], "type": "code"}, ", and\n    ", {"text": ["flame"], "type": "code"}, " (for pyro only). Additional fields may be advected by specifying\n    them here."]}], "indent": 0, "text": ["Extra Fields"], "role": "item", "attrs": {"id": "adv_extras"}, "extent": [15839, 15853], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 4, "text": ["Field Advection"], "extent": [12412, 12439], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [16140, 16322], "text": ["When enabled, ", {"text": ["Field Advection"], "type": "ui"}, " settings will also be used to advect the\n    velocity field. Turning this option off allows you to change advection\n    settings for velocity."]}], "indent": 0, "text": ["Use Field Advection Settings for Velocity"], "role": "item", "attrs": {"id": "adv_vel_usesame"}, "extent": [16071, 16115], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "type": "para", "extent": [16322, 16421], "text": ["The remaining settings in this section are the same as the ones listed under\n", {"text": ["Field Advection"], "type": "ui"}, "."]}], "indent": 0, "level": 4, "text": ["Velocity Advection"], "extent": [16042, 16071], "container": true, "type": "h", "id": null}], "indent": 0, "level": 3, "text": ["Advection"], "extent": [12394, 12412], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [16486, 16659], "text": ["If this option is enabled, the solver will build the ", {"text": ["collision"], "type": "code"}, " and\n    ", {"text": ["collisionvel"], "type": "code"}, " fields, allowing automatic interaction between smoke and\n    collision objects."]}], "indent": 0, "text": ["Build Collision Mask"], "role": "item", "attrs": {"id": "col_buildmask"}, "extent": [16440, 16463], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16710, 16894], "text": ["Controls how far from the collision objects the relevant fields are to be\n    built. This value is measured in voxels. If disabled, the fields will be\n    initialized everywhere."]}], "indent": 0, "text": ["Bandwidth"], "role": "item", "attrs": {"id": "col_usebandwidth col_bandwidth"}, "extent": [16659, 16670], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16959, 17220], "text": ["The local velocity of an affector object is a combination of the angular and\n    linear velocity. However, if the object is deforming and points match frame\n    to frame, the local point velocity can be used as well to estimate the\n    deformation effect."]}], "indent": 0, "text": ["Use Point Velocity for Collisions"], "role": "item", "attrs": {"id": "col_usepointvelocity"}, "extent": [16894, 16929], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [17287, 17488], "text": ["If an affector object doesn\u2019t have a stable point count, but does have a\n    volume representation, the change in the volume representation can be used\n    as an estimate of deformation velocity."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [17498, 17685], "text": ["This does not include any velocity tangential to the volume surface: a\n        conveyor belt will appear to be stationary as the volume remains\n        unchanged frame to frame."]}], "indent": 4, "role": "item", "type": "note", "extent": [17488, 17498]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Use Volume Velocity for Collisions"], "role": "item", "attrs": {"id": "col_usevolumevelocity"}, "extent": [17220, 17256], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [17732, 18394], "text": ["Normally, the collision relationship uses the signed distance field for each\n    object. However, if the object is a different type you can use other ways of\n    getting its effective signed distance field. If this option is enabled, the\n    object is examined for a ", {"text": ["surface"], "type": "code"}, " scalarfield, which is treated as a signed\n    distance field. If a ", {"text": ["density"], "type": "code"}, " field is present, it is treated as a fog\n    volume with a 0.5 cutoff. If a ", {"text": ["Geometry"], "type": "code"}, " geometry is attached, and it\n    consists of a single volume, that volume will be treated as a fog volume\n    (with cutoff of 0.5). However, if its boundary condition is set to SDF, it\n    will be treated as an SDF."]}], "indent": 0, "text": ["Collide with Non-SDF"], "role": "item", "attrs": {"id": "col_allownonsdf"}, "extent": [17685, 17707], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18444, 18520], "text": ["When enabled, the specified fields will be reset inside the colliders."]}], "indent": 0, "text": ["Correct Collisions"], "role": "item", "attrs": {"id": "col_correctcollision"}, "extent": [18394, 18414], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18569, 18668], "text": ["These fields will be reset inside the colliders when ", {"text": ["Correct Collisions"], "type": "ui"}, "\n    is turned on."]}], "indent": 0, "text": ["Fields to Correct"], "role": "item", "attrs": {"id": "col_correctionfields"}, "extent": [18520, 18539], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18711, 18942], "text": ["The degree to which the colliders are affected by smoke is controlled by the\n    value of this parameter. Higher values will increase the effect of pressure\n    forces on the colliders. A value of 0 will prevent any feedback."]}], "indent": 0, "text": ["Feedback Scale"], "role": "item", "attrs": {"id": "col_feedbackscale"}, "extent": [18668, 18684], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18982, 19239], "text": ["Colliders are integrated into the system using a weak coupling approach. The\n    number of projection iterations is controlled by this parameter. Larger\n    values will slow down the simulation, but yield better interaction with\n    collision objects."]}], "indent": 0, "text": ["IOP Iterations"], "role": "item", "attrs": {"id": "col_iterations"}, "extent": [18942, 18958], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Collisions"], "extent": [16421, 16440], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [19316, 19481], "text": ["Enables filtering of spurious divergent modes that may survive pressure\n    projection when ", {"text": ["Velocity Sampling"], "type": "ui"}, " on the smoke object is set to\n    ", {"text": ["Center"], "type": "ui"}, "."]}], "indent": 0, "text": ["Filter Hourglass Modes"], "role": "item", "attrs": {"id": "hfilt_dofilter"}, "extent": [19267, 19292], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1454, 1579], "text": ["Strength of hourglass filtering. Value of ", {"text": ["0"], "type": "code"}, " disables the filtering\n    altogether, while ", {"text": ["1"], "type": "code"}, " performs full filtering."]}], "indent": 0, "text": ["Amount"], "role": "item", "attrs": {"id": "hfilt_strength"}, "extent": [19481, 19489], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1620, 1783], "text": ["Instead of performing the filtering everywhere, it can be selectively\n    applied to voxels where divergence is still detected by turning this option\n    on."]}], "indent": 0, "text": ["Scale by Divergence"], "role": "item", "attrs": {"id": "hfilt_scalebydiv"}, "extent": [19563, 19584], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1829, 2084], "text": ["Similar to ", {"text": ["Scale by Divergence"], "type": "ui"}, ", this setting applies the filtering with\n    different strength in different places. Instead of pure divergence, however,\n    the quantity used to control filtering strength is the ratio of divergence\n    to speed."]}], "indent": 0, "text": ["Use Relative Divergence"], "role": "item", "attrs": {"id": "hfilt_scalebyreldiv"}, "extent": [19664, 19689], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [2120, 2392], "text": ["Controls how sensitive filter strength is to the remaining divergence (or\n    divergence relative to speed if ", {"text": ["Use Relative Divergence"], "type": "ui"}, " is enabled).\n    That is, the relevant quantity is multiplied by this amount before it is\n    used to determine filter strength."]}], "indent": 0, "text": ["Divergence Scale"], "role": "item", "attrs": {"id": "hfilt_divscale"}, "extent": [19773, 19791], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [19919, 20057], "text": ["When using an adaptive filter (", {"text": ["Scale by Divergence"], "type": "ui"}, " turned on), the\n    strength field can be visualized by enabling this option."]}], "indent": 0, "text": ["Visualize Filter Strength"], "role": "item", "attrs": {"id": "hfilt_visualize"}, "extent": [19867, 19894], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [20102, 20159], "text": ["Orientation of the cutting plane for visualization."]}], "indent": 0, "text": ["Plane Orientation"], "role": "item", "attrs": {"id": "hfilt_guideplane"}, "extent": [20057, 20076], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [20204, 20273], "text": ["Relative position of the cutting plane inside the bounding box."]}], "indent": 0, "text": ["Plane Position"], "role": "item", "attrs": {"id": "hfilt_guideplaneval"}, "extent": [20159, 20175], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [20321, 20419], "text": ["Determines how strength values (which fall between ", {"text": ["0"], "type": "code"}, " and ", {"text": ["1"], "type": "code"}, ") are\n    converted to colors."]}], "indent": 0, "text": ["Visualization Mode"], "role": "item", "attrs": {"id": "hfilt_guidevismode"}, "extent": [20273, 20293], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Hourglass Filtering"], "extent": [19239, 19267], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Advanced"], "extent": [7930, 7959], "container": true, "type": "h", "id": "advancedtab"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [4680, 4692], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [20428, 20457], "text": [{"text": ["Pyro Effects"], "fullpath": "/pyro/pyro", "scheme": null, "type": "link", "value": "/pyro/pyro"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [20457, 20511], "text": [{"text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/smokeobject_sparse"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [20511, 20564], "text": [{"text": ["Pyro Solver (Sparse)"], "fullpath": "/nodes/dop/pyrosolver_sparse", "scheme": "Node", "type": "link", "value": "/nodes/dop/pyrosolver_sparse"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [20419, 20428], "container": true, "type": "related_section", "id": "related"}], "title": ["Smoke Solver (Sparse)"], "summary": ["Performs a sparse smoke simulation on the given object. This is a slightly\nlower-level solver that is the basis for the sparse pyro solver."], "attrs": {"version": null, "namespace": null, "internal": "smokesolver_sparse", "context": "dop", "type": "node", "icon": "DOP/smokesolver_sparse"}, "included": ["/nodes/dop/gasfilterhourglassmodes", "/nodes/dop/standard_data_locals", "/nodes/dop/standard_data_outputs", "/nodes/dop/standard_gas_stencil", "/nodes/dop/standard_locals", "/nodes/dop/standard_microsolver_inputs"], "type": "root"}