{"body": [{"indent": 0, "text": ["HeightField Project"], "type": "title", "extent": [0, 24], "level": 0}, {"indent": 0, "type": "summary", "extent": [123, 172], "text": ["Projects 3D geometry into a height field."]}, {"indent": 0, "type": "para", "extent": [172, 271], "text": ["The first input is the height field to project into, the second input is the geometry to project."]}, {"indent": 0, "type": "para", "extent": [271, 322], "text": [{"text": "", "fullpath": "/images/nodes/sop/heightfield_project.png", "scheme": "Image", "type": "link", "value": "/images/nodes/sop/heightfield_project.png"}]}, {"indent": 0, "type": "para", "extent": [322, 468], "text": ["The node sends rays from the height field to the surface and (if it hits) uses the distance between the points to modify the height field value."]}, {"indent": 0, "type": "para", "extent": [468, 900], "text": ["Usually you will use this to import 3D geometry such as buildings or pre-made polygonal mountains into the height field, using the defaults (", {"text": ["Hit farthest"], "type": "ui"}, " on, ", {"text": ["Combine method"], "type": "ui"}, " set to \"Maximum\"). You can reverse those settings (", {"text": ["Hit farthest"], "type": "ui"}, " off, ", {"text": ["Combine method"], "type": "ui"}, " set to \"Minimum\") to lower the geometry shape instead of raising it. (It might also be possible to create weird or interesting effects using other settings.)"]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [905, 1102], "text": ["This node projects geometry into a height field as 3D height. To project the outline of geometry into a mask field as 2D, use ", {"text": ["Height Field Mask by Object"], "fullpath": "/nodes/sop/heightfield_maskbyobject", "scheme": "Node", "type": "link", "value": "/nodes/sop/heightfield_maskbyobject"}, "."]}], "indent": 0, "role": "item", "type": "tip", "extent": [900, 905]}], "container": true, "role": "item_group", "type": "tip_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1142, 1220], "text": ["The name of the layer to project the 3D geometry into, usually ", {"text": ["height"], "type": "code"}, "."]}], "indent": 0, "text": ["Layer"], "role": "item", "attrs": {"id": "layer"}, "extent": [1114, 1122], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1254, 1458], "text": ["If the ray hits the geometry, the layer value is set to the ", {"text": ["Density"], "type": "ui"}, " \n    value. This can be optionally inverted so that only the points for which\n    the ray does ", {"text": ["not"], "type": "em"}, " hit the geometry are set."]}], "indent": 0, "text": ["Mask Mode"], "role": "item", "attrs": {"id": "maskmode"}, "extent": [1220, 1231], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1489, 1554], "text": ["The value to set the mask to, if the ray hits the geometry."]}], "indent": 0, "text": ["Density"], "role": "item", "attrs": {"id": "maskdensity"}, "extent": [1458, 1467], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1583, 1733], "text": ["Invert the changes to the mask, so the mask value is set to ", {"text": ["Density"], "type": "ui"}, " if \n    the ray ", {"text": ["misses"], "type": "em"}, " the geometry, and is left unchanged otherwise."]}], "indent": 0, "text": ["Invert"], "role": "item", "attrs": {"id": "maskinvert"}, "extent": [1554, 1562], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1773, 1981], "text": ["When projecting, record the ray hit farthest collision surface instead of the closest. This defaults to on. To create valleys instead of mountains, turn this off and set ", {"text": ["Combine Method"], "type": "ui"}, " to \"Minimum\"."]}], "indent": 0, "text": ["Hit Farthest"], "role": "item", "attrs": {"id": "hitfarthest"}, "extent": [1733, 1747], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2026, 2097], "text": ["How to combine this mask with any existing mask in the input."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [2110, 2185], "text": ["Clear the existing mask and replace it with the new mask."]}], "indent": 4, "type": "dt", "extent": [2097, 2110], "text": ["Replace"]}, {"body": [{"indent": 8, "type": "para", "extent": [2194, 2253], "text": ["Add the values in this mask to any existing mask."]}], "indent": 4, "type": "dt", "extent": [2185, 2194], "text": ["Add"]}, {"body": [{"indent": 8, "type": "para", "extent": [2267, 2421], "text": ["Multiply the values of the old mask by the values in this mask. This might be useful to \"scale\" existing values while leaving empty areas alone."]}], "indent": 4, "type": "dt", "extent": [2253, 2267], "text": ["Multiply"]}, {"body": [{"indent": 8, "type": "para", "extent": [2434, 2517], "text": ["Set the mask values to the maximum of the old mask and this mask."]}], "indent": 4, "type": "dt", "extent": [2421, 2434], "text": ["Maximum"]}, {"body": [{"indent": 8, "type": "para", "extent": [2530, 2606], "text": ["Set the mask values to the minimum of the old mask and this mask."]}], "indent": 4, "type": "dt", "extent": [2517, 2530], "text": ["Minimum"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Combine with Existing"], "role": "item", "attrs": {"id": "combine"}, "extent": [1981, 2004], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2645, 2983], "text": ["The maximum distance from the original position of the point the rays will look at. The node will not detect intersections outside this range. If the geometry is far from the height field in 3D space, you may need to increase this. If ", {"text": ["Combine method"], "type": "ui"}, " is \"Minimum\", any points farther from the surface than this will not be moved."]}], "indent": 0, "text": ["Max Ray Dist"], "role": "item", "attrs": {"id": "maxraydist"}, "extent": [2606, 2620], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3017, 3261], "text": ["When projecting, send extra rays which are randomly perturbed (\"jittered\"), and whose results are combined using the specified ", {"text": ["Ray Combiner"], "type": "ui"}, ". This is useful when your models have small gaps or holes which the ray could otherwise miss. "]}], "indent": 0, "text": ["Supersampling"], "role": "item", "attrs": {"id": "dojitter"}, "extent": [2983, 2998], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3287, 3631], "text": ["The number of sample rays to send. If set to more than 1, a ray is sent from the center of the current voxel, and the starting points of the extra rays are scattered around the center. The distances returned from these collisions are combined as specified by the Ray Combiner. This effect is only visible if the ", {"text": ["Jitter"], "type": "ui"}, " value is not 0."]}], "indent": 0, "text": ["Samples"], "role": "item", "attrs": {"id": "sample"}, "extent": [3261, 3270], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3656, 3970], "text": ["Controls how much the extra rays can vary, specified in voxels. A jitter value of 1 means the extra rays can be up to 1 voxel away from the center of the current voxel, while a jitter value of 0.5 specifies that rays differ by only up to half a voxel away from the center. A jitter value of 0 has no effect. "]}], "indent": 0, "text": ["Jitter"], "role": "item", "attrs": {"id": "jitter"}, "extent": [3631, 3639], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4008, 4111], "text": ["Controls how the distances to the collisions of each ray are combined into a single distance."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4124, 4186], "text": ["Averages the distances to create the final distance."]}], "indent": 4, "type": "dt", "extent": [4111, 4124], "text": ["Average"]}, {"body": [{"indent": 8, "type": "para", "extent": [4198, 4346], "text": ["The final distance is the median distance. This often does a good job of smoothing away spikes which occur as a result of gaps in a model."]}], "indent": 4, "type": "dt", "extent": [4186, 4198], "text": ["Median"]}, {"body": [{"indent": 8, "type": "para", "extent": [4360, 4417], "text": ["The shortest ray determines the final distance."]}], "indent": 4, "type": "dt", "extent": [4346, 4360], "text": ["Shortest"]}, {"body": [{"indent": 8, "type": "para", "extent": [4430, 4486], "text": ["The longest ray determines the final distance."]}], "indent": 4, "type": "dt", "extent": [4417, 4430], "text": ["Longest"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Ray Combiner"], "role": "item", "attrs": {"id": "jittercombine"}, "extent": [3970, 3984], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4507, 4663], "text": ["Seeds the random number generator. Different seeds will give different sets of rays, so this can be tuned to minimize spikes caused by gaps and holes."]}], "indent": 0, "text": ["Seed"], "role": "item", "attrs": {"id": "seed"}, "extent": [4486, 4492], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1102, 1114], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [4672, 4712], "text": [{"text": "", "fullpath": "/nodes/sop/heightfield_maskbyobject", "scheme": "Node", "type": "link", "value": "/nodes/sop/heightfield_maskbyobject"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [4663, 4672], "container": true, "type": "related_section", "id": "related"}], "summary": ["Projects 3D geometry into a height field."], "type": "root", "attrs": {"version": null, "namespace": null, "internal": "heightfield_project", "context": "sop", "type": "node", "icon": "SOP/heightfield_project"}, "title": ["HeightField Project"]}