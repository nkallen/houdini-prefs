{"body": [{"indent": 0, "text": ["Vellum Post-Process"], "type": "title", "extent": [94, 118], "level": 0}, {"indent": 0, "type": "summary", "extent": [118, 197], "text": ["Applies common post-processing effects to the result of Vellum solves."]}, {"indent": 0, "type": "para", "extent": [197, 534], "text": ["The Vellum Post-Process node provides common post-processing operations\nfor Vellum solvers.  It can fuse the welds to be shared points, smooth\nthe geometry, and subdivide the mesh.  In addition, if constraints\nare provided it can visualize the constraint energies, very useful\nwhen inspecting a simulation that has been saved to disk."]}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [595, 699], "text": ["Fuse all the points that have been implicitly welded with\n    ", {"text": ["weld"], "type": "code"}, " and ", {"text": ["branchweld"], "type": "code"}, " attributes."]}], "indent": 0, "text": ["Apply Welds"], "role": "item", "attrs": {"id": "doweld"}, "extent": [564, 578], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [742, 785], "text": ["Points to apply blurring effects to."]}], "indent": 0, "text": ["Group"], "role": "item", "attrs": {"id": "blurgroup"}, "extent": [714, 722], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [821, 959], "text": ["Amount of blurring to apply.  Points move to the average of their\n    neighbors.  This can smooth out unwanted spikes in the cloth."]}], "indent": 0, "text": ["Spatial Blur"], "role": "item", "attrs": {"id": "spatialblur"}, "extent": [785, 799], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [992, 1160], "text": ["A low res cloth can be up-resed after the solve by smoothly subdividing it.  Non-manifold patches will be split prior to subdividing to ensure gaps aren\u2019t formed."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [1170, 1202], "text": ["No subdivsion is done."]}], "indent": 4, "type": "dt", "extent": [1160, 1170], "text": ["None"]}, {"body": [{"indent": 8, "type": "para", "extent": [1221, 1302], "text": ["Catmull-Clark subdivision, which works best for quadrilaterals is done."]}], "indent": 4, "type": "dt", "extent": [1202, 1221], "text": ["Catmull-Clark"]}, {"body": [{"indent": 8, "type": "para", "extent": [1312, 1381], "text": ["Loop subdivision, which works best for triangles, is done."]}], "indent": 4, "type": "dt", "extent": [1302, 1312], "text": ["Loop"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Subdivision"], "role": "item", "attrs": {"id": "subdivide"}, "extent": [959, 972], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1416, 1466], "text": ["Number of rounds of subdivision to perform."]}], "indent": 0, "text": ["Subdivision Depth"], "role": "item", "attrs": {"id": "depth"}, "extent": [1381, 1400], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Smooth"], "extent": [699, 714], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1527, 1764], "text": ["The smooth and subdividing may introduce collisions.  Detangling\n    moves points to avoid such introduced collisions.  Note each point\n    moves independently, so this can result in ugly geometry if large\n    changes are required."]}], "indent": 0, "text": ["Detangle"], "role": "item", "attrs": {"id": "dodetangle"}, "extent": [1495, 1506], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1798, 1831], "text": ["Check for self-collisions."]}], "indent": 0, "text": ["Self Collisions"], "role": "item", "attrs": {"id": "doself"}, "extent": [1764, 1781], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1863, 1916], "text": ["Number of iterations of detangling to perform."]}], "indent": 0, "text": ["Passes"], "role": "item", "attrs": {"id": "detangle_pass"}, "extent": [1831, 1839], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1964, 2044], "text": ["If no ", {"text": ["pscale"], "type": "code"}, " is present, this is used for the thickness of the objects."]}], "indent": 0, "text": ["Default Thickness"], "role": "item", "attrs": {"id": "detangle_thickness"}, "extent": [1916, 1935], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Collision Correction"], "extent": [1466, 1495], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2103, 2170], "text": ["Extrude cloth sheets in both directions along their normals."]}], "indent": 0, "text": ["Extrude by Thickness"], "role": "item", "attrs": {"id": "doextrude"}, "extent": [2060, 2083], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2211, 2275], "text": ["Multiplier to scale ", {"text": ["pscale"], "type": "code"}, " by for the extrusion amount."]}], "indent": 0, "text": ["Thickness Scale"], "role": "item", "attrs": {"id": "extrude_scale"}, "extent": [2170, 2187], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Thicken"], "extent": [2044, 2060], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Operations"], "extent": [546, 564], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2332, 2408], "text": ["Visualize the third input, the collision geometry, as blue wireframe."]}], "indent": 0, "text": ["Show Collision"], "role": "item", "attrs": {"id": "showcollision"}, "extent": [2291, 2308], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2449, 2493], "text": ["Display the constraint guide geometry."]}], "indent": 0, "text": ["Show Guide Geometry"], "role": "item", "attrs": {"id": "showguide"}, "extent": [2408, 2429], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"type": "para", "indent": 4, "extent": [60, 429], "text": ["Draw spheres for the ", {"text": ["pscale"], "type": "code"}, " of the geometry.   If the geometry has already\n    solved it may have set the ", {"text": ["overlap_self"], "type": "code"}, " attribute, if so, the actual\n    effective thickness is drawn in cyan.  This is useful to detect if\n    the original thickness was too high - if so the extra thickness will\n    be ignored by the simulation and just slow down the collisions."]}], "indent": 0, "text": ["Thickness"], "role": "item", "attrs": {"id": "guide_thicknesscolor"}, "extent": [17, 29], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [475, 583], "text": ["Draw the thickness by offsetting the geometry in opposite directions rather\n    than by using spheres."]}], "indent": 0, "text": ["Extrude"], "role": "item", "attrs": {"id": "guide_showthicknessextrude"}, "extent": [429, 438], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [633, 801], "text": ["Draw failed self collisions as red spheres.  These points will no\n    longer collide with their own geometry, nor will any edge or triangle\n    attached to them."]}], "indent": 0, "text": ["Failed Self Collision"], "role": "item", "attrs": {"id": "guide_failedself"}, "extent": [583, 606], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [859, 1032], "text": ["Draw failed external collisions as orange spheres.  These points will\n    no longer collide with external geometry, nor will any edge or triangle\n    attached to them."]}], "indent": 0, "text": ["Failed External Collision"], "role": "item", "attrs": {"id": "guide_failedexternal"}, "extent": [801, 828], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1065, 1257], "text": ["Draw which points have been semantically fused together with the\n    ", {"text": ["weld"], "type": "code"}, " attribute.  These can be broken during the solve using\n    the auto break options, or by setting ", {"text": ["weld"], "type": "code"}, " to -1."]}], "indent": 0, "text": ["Welds"], "role": "item", "attrs": {"id": "guide_weldcolor"}, "extent": [1032, 1039], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1299, 1471], "text": ["Because the thickness may be small, the visualization spheres can sometimes\n    be lost.  This scales the visualization spheres allowing them to\n    be readily seen."]}], "indent": 0, "text": ["Radius Scale"], "role": "item", "attrs": {"id": "guide_colvisscale"}, "extent": [1257, 1271], "type": "parameters_item"}], "type": "parameters_item_group", "container": true}], "container": true, "level": 3, "text": ["Geometry"], "extent": [0, 17], "indent": 0, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"type": "para", "indent": 4, "extent": [1531, 1653], "text": ["Constraints are often added to different groups.  This allows you to\n    isolate one particular group to visualize."]}], "indent": 0, "text": ["Group"], "role": "item", "attrs": {"id": "guide_constraintgroup"}, "extent": [1491, 1499], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1693, 1755], "text": ["Draw spheres over points pinned to the target animation."]}], "indent": 0, "text": ["Pin to Target"], "role": "item", "attrs": {"id": "guide_pincolor"}, "extent": [1653, 1668], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1798, 1856], "text": ["Draw stitch constraints of points stitched together."]}], "indent": 0, "text": ["Stitch Points"], "role": "item", "attrs": {"id": "guide_stitchcolor"}, "extent": [1755, 1770], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1904, 1979], "text": ["Draw attachment constraints for points attached to external geometry."]}], "indent": 0, "text": ["Attach to Geometry"], "role": "item", "attrs": {"id": "guide_attachcolor"}, "extent": [1856, 1876], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [2023, 2153], "text": ["The constraint guides are not scaled by the thickness of the object,\n    so this provides an absolute scale for their size."]}], "indent": 0, "text": ["Radius"], "role": "item", "attrs": {"id": "guide_constraintvisradius"}, "extent": [1979, 1987], "type": "parameters_item"}], "type": "parameters_item_group", "container": true}], "container": true, "level": 3, "text": ["Constraints"], "extent": [1471, 1491], "indent": 0, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"type": "para", "indent": 4, "extent": [2213, 2297], "text": ["Visualize properties of the constraints using a blue-to-red infrared coloring."]}, {"body": [{"body": [{"type": "para", "indent": 8, "extent": [2307, 2343], "text": ["Leave the original colors."]}], "type": "dt", "indent": 4, "extent": [2297, 2307], "text": ["None"]}, {"body": [{"type": "para", "indent": 8, "extent": [2363, 2448], "text": ["Color according to the maximum stretching force applied by the constraints."]}], "type": "dt", "indent": 4, "extent": [2343, 2363], "text": ["Stretch Stress"]}, {"body": [{"type": "para", "indent": 8, "extent": [2465, 2547], "text": ["Color according to the maximum bending force applied by the constraints."]}], "type": "dt", "indent": 4, "extent": [2448, 2465], "text": ["Bend Stress"]}, {"body": [{"type": "para", "indent": 8, "extent": [2569, 2632], "text": ["Color according to how far constraints are stretched."]}], "type": "dt", "indent": 4, "extent": [2547, 2569], "text": ["Stretch Distance"]}, {"body": [{"type": "para", "indent": 8, "extent": [2651, 2724], "text": ["Color according the ratio between original and current stretch."]}], "type": "dt", "indent": 4, "extent": [2632, 2651], "text": ["Stretch Ratio"]}, {"body": [{"type": "para", "indent": 8, "extent": [2740, 2814], "text": ["Color according to how many degrees the bend angle has deviated."]}], "type": "dt", "indent": 4, "extent": [2724, 2740], "text": ["Bend Angle"]}, {"body": [{"type": "para", "indent": 8, "extent": [2840, 2922], "text": ["Color according to how much the stretch plastic flow has been triggered."]}], "type": "dt", "indent": 4, "extent": [2814, 2840], "text": ["Stretch Plastic Flow"]}, {"body": [{"type": "para", "indent": 8, "extent": [2945, 3024], "text": ["Color according to how much the bend plastic flow has been triggered."]}], "type": "dt", "indent": 4, "extent": [2922, 2945], "text": ["Bend Plastic Flow"]}, {"body": [{"type": "para", "indent": 8, "extent": [3043, 3128], "text": ["Color according to the maximum volumetric force applied by the constraints."]}], "type": "dt", "indent": 4, "extent": [3024, 3043], "text": ["Volume Stress"]}, {"body": [{"type": "para", "indent": 8, "extent": [3149, 3245], "text": ["Color according to how far volumetric constraints have expanded from their rest state."]}], "type": "dt", "indent": 4, "extent": [3128, 3149], "text": ["Volume Distance"]}, {"body": [{"type": "para", "indent": 8, "extent": [3263, 3348], "text": ["Color according the ratio between volumetric expansion and the rest state."]}], "type": "dt", "indent": 4, "extent": [3245, 3263], "text": ["Volume Ratio"]}], "type": "dt_group", "container": true}], "indent": 0, "text": ["False Color Mode"], "role": "item", "attrs": {"id": "vis_mode"}, "extent": [2175, 2194], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [3405, 3495], "text": ["Toggles if the simulation geometry is false-colored in addition to the constraints."]}], "indent": 0, "text": ["Display Visualization Geometry"], "role": "item", "attrs": {"id": "vis_displaygeo"}, "extent": [3348, 3380], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [3546, 3616], "text": ["Scales the maximum stretch stress to be the maximum coloration."]}], "indent": 0, "text": ["Max Stretch Stress"], "role": "item", "attrs": {"id": "vis_maxstretchstress"}, "extent": [3495, 3515], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [3661, 3727], "text": ["Scales the maximum bend stress to be the maximum coloration."]}], "indent": 0, "text": ["Max Bend Stress"], "role": "item", "attrs": {"id": "vis_maxbendstress"}, "extent": [3616, 3633], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [3782, 3851], "text": ["Sets the maximum stretch distance to be the maximum coloration."]}], "indent": 0, "text": ["Max Stretch Distance"], "role": "item", "attrs": {"id": "vis_maxstretchdistance"}, "extent": [3727, 3749], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [3900, 3966], "text": ["Sets the maximum stretch ratio to be the maximum coloration."]}], "indent": 0, "text": ["Max Stretch Ratio"], "role": "item", "attrs": {"id": "vis_maxstretchratio"}, "extent": [3851, 3870], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4009, 4072], "text": ["Sets the maximum bend angle to be the maximum coloration."]}], "indent": 0, "text": ["Max Bend Angle"], "role": "item", "attrs": {"id": "vis_maxbendangle"}, "extent": [3966, 3982], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4134, 4207], "text": ["Sets the maximum stretch plastic flow to be the maximum coloration."]}], "indent": 0, "text": ["Max Stretch Plastic Flow"], "role": "item", "attrs": {"id": "vis_maxstretchplasticflow"}, "extent": [4072, 4098], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4263, 4333], "text": ["Sets the maximum bend plastic flow to be the maximum coloration."]}], "indent": 0, "text": ["Max Bend Plastic Flow"], "role": "item", "attrs": {"id": "vis_maxbendplasticflow"}, "extent": [4207, 4230], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4382, 4450], "text": ["Scales the maximum volume stress to be the maximum coloration."]}], "indent": 0, "text": ["Max Volume Stress"], "role": "item", "attrs": {"id": "vis_maxvolumestress"}, "extent": [4333, 4352], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4503, 4573], "text": ["Scales the maximum volume distance to be the maximum coloration."]}], "indent": 0, "text": ["Max Volume Distance"], "role": "item", "attrs": {"id": "vis_maxvolumedistance"}, "extent": [4450, 4471], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4620, 4686], "text": ["Scales the maximum volume ratio to be the maximum coloration."]}], "indent": 0, "text": ["Max Volume Ratio"], "role": "item", "attrs": {"id": "vis_maxvolumeratio"}, "extent": [4573, 4591], "type": "parameters_item"}], "type": "parameters_item_group", "container": true}], "container": true, "level": 3, "text": ["Visualization"], "extent": [2153, 2175], "indent": 0, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Visualize"], "extent": [2275, 2291], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [534, 546], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [2540, 2570], "text": [{"text": "", "fullpath": "/nodes/sop/vellumsolver", "scheme": "Node", "type": "link", "value": "/nodes/sop/vellumsolver"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [2570, 2599], "text": [{"text": "", "fullpath": "/nodes/sop/vellumdrape", "scheme": "Node", "type": "link", "value": "/nodes/sop/vellumdrape"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [2599, 2634], "text": [{"text": "", "fullpath": "/nodes/sop/vellumconstraints", "scheme": "Node", "type": "link", "value": "/nodes/sop/vellumconstraints"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [2634, 2675], "text": [{"text": "", "fullpath": "/nodes/sop/vellumconstraints_grain", "scheme": "Node", "type": "link", "value": "/nodes/sop/vellumconstraints_grain"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [2675, 2701], "text": [{"text": "", "fullpath": "/nodes/sop/vellumio", "scheme": "Node", "type": "link", "value": "/nodes/sop/vellumio"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [2531, 2540], "container": true, "type": "related_section", "id": "related"}], "title": ["Vellum Post-Process"], "summary": ["Applies common post-processing effects to the result of Vellum solves."], "attrs": {"version": null, "namespace": null, "internal": "vellumpostprocess", "context": "sop", "type": "node", "icon": "SOP/vellumpostprocess"}, "included": ["/nodes/sop/_vellum_common"], "type": "root"}