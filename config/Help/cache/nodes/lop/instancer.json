{"body": [{"indent": 0, "text": ["Instancer"], "type": "title", "extent": [0, 14], "level": 0}, {"indent": 0, "type": "summary", "extent": [95, 147], "text": ["Instances or copies primitives onto points."]}, {"body": [{"indent": 0, "type": "para", "extent": [162, 503], "text": ["USD supports two types of instancing: ", {"text": ["instanceable primitives"], "type": "em"}, " (where multiple copies of the same branch are aliases to shared storage) and ", {"text": ["point instancing"], "type": "em"}, " (where USD stores ", {"text": ["points"], "type": "em"}, " and ", {"text": ["prototypes"], "type": "em"}, " to copy onto the points, but only draws the copies at render time). See ", {"fragment": "#instancing", "text": ["USD instancing"], "value": "/solaris/usd#instancing", "fullpath": "/solaris/usd#instancing", "scheme": null, "type": "link"}, " for more information."]}, {"indent": 0, "type": "para", "extent": [503, 730], "text": ["This node can do both types of instancing: it can create a point instancer, or it can place instanceable prims based on the locations of points. (It can also reference in ", {"text": ["real separate copies"], "type": "em"}, " instead of instanceable prims.)"]}, {"indent": 0, "type": "para", "extent": [730, 900], "text": ["The thing or things you want to create multiples of are called the ", {"text": ["prototypes"], "type": "em"}, ". This node assumes the prototypes already exist, connected to the first or second input."]}, {"indent": 0, "type": "para", "extent": [900, 1156], "text": ["The points you want to instance/copy onto are called the ", {"text": ["targets"], "type": "em"}, ". The targets can be points or prim positions in the input scene graph tree, or you can generate them in the SOP subnet inside this node, or in a SOP node elsewhere in the node hierarchy."]}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [147, 162], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1298, 1425], "text": ["The \"Torus\" tool actually creates a SOP Create node that imports the result of a ", {"text": ["Torus SOP"], "fullpath": "/nodes/sop/torus", "scheme": "Node", "type": "link", "value": "/nodes/sop/torus"}, " into USD."]}, {"indent": 8, "type": "para", "extent": [1425, 1511], "text": ["On the SOP Create node, set the ", {"text": ["Import path prefix"], "type": "ui"}, " to ", {"text": ["/Geometry/torus"], "type": "code"}, "."]}], "indent": 4, "text": ["In the network editor, use the ", {"keys": ["Tab"], "text": null, "type": "keys"}, " menu to create a Torus."], "extent": [1228, 1298], "blevel": 6, "type": "ord"}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [1511, 1638], "text": ["Add a ", {"text": ["Sphere LOP"], "fullpath": "/nodes/lop/sphere", "scheme": "Node", "type": "link", "value": "/nodes/lop/sphere"}, ". Set the ", {"text": ["Primitive path"], "type": "ui"}, " to ", {"text": ["/Geometry/ball"], "type": "code"}, " and the ", {"text": ["Uniform scale"], "type": "ui"}, " to ", {"text": ["0.05"], "type": "code"}, "."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [1638, 1761], "text": ["Add a ", {"text": ["Cone LOP"], "fullpath": "/nodes/lop/cone", "scheme": "Node", "type": "link", "value": "/nodes/lop/cone"}, ". Set the ", {"text": ["Primitive path"], "type": "ui"}, " to ", {"text": ["/Geometry/cone"], "type": "code"}, " and the ", {"text": ["Uniform scale"], "type": "ui"}, " to ", {"text": ["0.05"], "type": "code"}, "."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [1761, 1890], "text": ["Add a ", {"text": ["Cylinder LOP"], "fullpath": "/nodes/lop/sphere", "scheme": "Node", "type": "link", "value": "/nodes/lop/sphere"}, ". Set the ", {"text": ["Primitive path"], "type": "ui"}, " to ", {"text": ["/Geometry/tube"], "type": "code"}, " and the ", {"text": ["Uniform scale"], "type": "ui"}, " to ", {"text": ["0.05"], "type": "code"}, "."]}, {"body": [{"body": [{"indent": 8, "blevel": 10, "type": "bullet", "extent": [1919, 1980], "text": ["Set the ", {"text": ["Primitive path"], "type": "ui"}, " to ", {"text": ["/Geometry/shapes"], "type": "code"}, "."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [1980, 2032], "text": ["Set the ", {"text": ["Method"], "type": "ui"}, " to \"Point instancer\"."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2032, 2098], "text": ["Set the ", {"text": ["Location source"], "type": "ui"}, " to \"First input\u2019s points\"."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2098, 2170], "text": ["Set the ", {"text": ["Location primitives"], "type": "ui"}, " to ", {"text": ["/Geometry/torus/mesh_0"], "type": "code"}, "."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2170, 2228], "text": ["Set the ", {"text": ["Prototype source"], "type": "ui"}, " to \"First input\"."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2228, 2323], "text": ["Set the ", {"text": ["Prototype primitives"], "type": "ui"}, " to ", {"text": ["/Geometry/ball /Geometry/cone /Geometry/tube"], "type": "code"}, "."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2323, 2374], "text": ["Set the ", {"text": ["Prototype index"], "type": "ui"}, " to \"Random\""]}], "container": true, "type": "bullet_group"}, {"indent": 8, "type": "para", "extent": [2374, 2462], "text": ["The node randomly instances a ball, cone, or tube at each point of the torus."]}], "indent": 4, "text": ["Add an Instancer LOP."], "extent": [1890, 1919], "blevel": 6, "type": "ord"}], "container": true, "type": "ord_group"}], "indent": 0, "text": [" ", {"text": "", "fullpath": "/images/nodes/lop/point_instancer_lop.jpg", "scheme": "Image", "type": "link", "value": "/images/nodes/lop/point_instancer_lop.jpg"}], "role": "item", "extent": [1170, 1228], "type": "fig"}], "container": true, "role": "item_group", "type": "fig_group"}], "indent": 0, "level": 2, "text": ["Example"], "extent": [1156, 1170], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "text": [" General "], "type": "sep", "extent": [2474, 2491], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [2527, 2736], "text": ["The scene graph path at which to create the point instancer prim (when ", {"text": ["Method"], "type": "ui"}, " is \"Point instancer\"), or the parent of all created prims (when ", {"text": ["Method"], "type": "ui"}, " is \"References\" or \"Instanceable References\")."]}], "indent": 0, "text": ["Primitive Path"], "role": "item", "attrs": {"id": "primpath"}, "extent": [2491, 2508], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2771, 2924], "text": ["If the prim at ", {"text": ["Primitive path"], "type": "ui"}, " doesn\u2019t exist, this node creates it. If it creates the prim, it sets this as the prim\u2019s ", {"fragment": "#kind", "text": ["kind"], "value": "/solaris/usd#kind", "fullpath": "/solaris/usd#kind", "scheme": null, "type": "link"}, "."]}], "indent": 0, "text": ["Primitive Kind"], "role": "item", "attrs": {"id": "primkind"}, "extent": [2736, 2752], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2949, 3024], "text": ["See ", {"fragment": "#instancing", "text": ["Instancing in USD"], "value": "/solaris/usd#instancing", "fullpath": "/solaris/usd#instancing", "scheme": null, "type": "link"}, " for more information."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3045, 3207], "text": ["Create a point instancer. This is a single prim (with the prototypes as children) that draws the instanced geometry on-demand in the viewer or renderer."]}], "indent": 4, "type": "dt", "extent": [3024, 3045], "text": ["Point Instancer"]}, {"body": [{"indent": 8, "type": "para", "extent": [3223, 3431], "text": ["Creates a separate prim at each point that references in the \"prototype\" prim(s). These references take up more storage space than instanceable prims, but you can edit/override the descendant prims."]}], "indent": 4, "type": "dt", "extent": [3207, 3223], "text": ["References"]}, {"body": [{"indent": 8, "type": "para", "extent": [3460, 3770], "text": ["Creates an ", {"fragment": "#instancing", "text": ["instanceable prim"], "value": "/solaris/usd#instancing", "fullpath": "/solaris/usd#instancing", "scheme": null, "type": "link"}, " at each point. These are separate prims in the scene graph tree, and can individual overrides on each top-level prim, but they share a \"shadow\" copy of their descendant prims, so their descendants are not editable or individually override-able."]}], "indent": 4, "type": "dt", "extent": [3431, 3460], "text": ["Instanceable References"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Method"], "role": "item", "attrs": {"id": "method"}, "extent": [2924, 2932], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Target Points "], "type": "sep", "extent": [3770, 3792], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3840, 3883], "text": ["Where to get the points to copy onto."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3901, 3985], "text": ["Build a SOP network in the subnet inside this node to generate the points."]}], "indent": 4, "type": "dt", "extent": [3883, 3901], "text": ["Internal SOP"]}, {"body": [{"indent": 8, "type": "para", "extent": [4003, 4093], "text": ["Get the points from the output of a SOP elsewhere in the Houdini node hierarchy."]}], "indent": 4, "type": "dt", "extent": [3985, 4003], "text": ["External SOP"]}, {"body": [{"indent": 8, "type": "para", "extent": [4123, 4205], "text": ["Use the positions of primitives in the first input as the target points."]}], "indent": 4, "type": "dt", "extent": [4093, 4123], "text": ["First input\u2019s primitives"]}, {"body": [{"indent": 8, "type": "para", "extent": [4231, 4296], "text": ["Get the points from a geometry prim in the first input."]}], "indent": 4, "type": "dt", "extent": [4205, 4231], "text": ["First input\u2019s points"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Location Source"], "role": "item", "attrs": {"id": "transformsourcemode"}, "extent": [3792, 3810], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4329, 4442], "text": ["When ", {"text": ["Location source"], "type": "ui"}, " is \"External SOP\", the node path of the SOP node that generates the target points."]}], "indent": 0, "text": ["SOP Path"], "role": "item", "attrs": {"id": "pointsoppath"}, "extent": [4296, 4306], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4479, 4604], "text": ["When ", {"text": ["Location source"], "type": "ui"}, " is \"Internal SOP\" or \"External SOP\", get the points from this named group in the SOP geometry."]}], "indent": 0, "text": ["Point Group"], "role": "item", "attrs": {"id": "pointsopgroup"}, "extent": [4442, 4455], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4651, 5071], "text": ["When ", {"text": ["Location source"], "type": "ui"}, " is \"First input\u2019s primitives\", this is the scene graph paths of the primitives whose positions you want to use as target points. When ", {"text": ["Location source"], "type": "ui"}, " is \"First input\u2019s points\", this is a the scene graph path(s) of one or more geometry prims containing target points (such as a polygonal mesh). In either case you can use ", {"text": ["pattern syntax"], "fullpath": "/solaris/pattern", "scheme": null, "type": "link", "value": "/solaris/pattern"}, " to select multiple primitives."]}], "indent": 0, "text": ["Location Primitives"], "role": "item", "attrs": {"id": "locationpattern"}, "extent": [4604, 4625], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5103, 5376], "text": ["You can delete or hide a certain percentage of the target points. This may be useful if the target points come from an overly dense point cloud, or to speed up display when you're first setting up the instancer. The default is \"None\" to not delete or hide any points."]}], "indent": 0, "text": ["Prune Mode"], "role": "item", "attrs": {"id": "prunemode"}, "extent": [5071, 5083], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5412, 5585], "text": ["When ", {"text": ["Prune mode"], "type": "ui"}, " is \"Delete\" or \"Set visibility\", the percentage of points to delete or hide. This can be used to improve performance while setting up the operator."]}], "indent": 0, "text": ["Prune Amount"], "role": "item", "attrs": {"id": "pruneamount"}, "extent": [5376, 5390], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5622, 5795], "text": ["Rotate the instanced primitives based on standard ", {"text": ["instancing SOP attributes"], "fullpath": "/copy/instanceattrs", "scheme": null, "type": "link", "value": "/copy/instanceattrs"}, " on the points. These SOP attributes include ", {"text": ["N"], "type": "code"}, ", ", {"text": ["up"], "type": "code"}, " , and ", {"text": ["orient"], "type": "code"}, "."]}], "indent": 0, "text": ["Set Orientation"], "role": "item", "attrs": {"id": "setorient"}, "extent": [5585, 5602], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5825, 5993], "text": ["Scale the instanced primitives based on standard ", {"text": ["instancing SOP attributes"], "fullpath": "/copy/instanceattrs", "scheme": null, "type": "link", "value": "/copy/instanceattrs"}, " on the points. These SOP attributes include ", {"text": ["scale"], "type": "code"}, " and ", {"text": ["pscale"], "type": "code"}, "."]}], "indent": 0, "text": ["Set Scale"], "role": "item", "attrs": {"id": "setscale"}, "extent": [5795, 5806], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6063, 6164], "text": ["Set the visibility of the ", {"text": ["Location primitives"], "type": "ui"}, " to \"hidden\" in the output. The default is on."]}], "indent": 0, "text": ["Make Transform Source Primitives Invisible"], "role": "item", "attrs": {"id": "hidesourceprims"}, "extent": [5993, 6037], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6208, 6521], "text": ["A list of attributes on the template points to copy to instances. When creating a Point Instancer, an array primvar will be created for each listed attribute, with an entry for each point\u2019s value. When creating reference primitives, an attribute of the same name and type will be created on each primitive."]}], "indent": 0, "text": ["Point Attributes to Copy"], "role": "item", "attrs": {"id": "attribs"}, "extent": [6164, 6190], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Primitive Naming "], "type": "sep", "extent": [6521, 6546], "level": 3}, {"indent": 0, "type": "para", "extent": [6546, 6639], "text": ["These parameters are visible when ", {"text": ["Method"], "type": "ui"}, " is \"References\" or \"Instanceable references\"."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [6682, 6904], "text": ["A prefix string for the names of prims created by this node. The node appends the point index to this string to create each name. This is ignored if ", {"text": ["Use Name Attribute"], "type": "ui"}, " is on (below) and the name attribute exists."]}], "indent": 0, "text": ["Instance Base Name"], "role": "item", "attrs": {"id": "instancename"}, "extent": [6639, 6659], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6948, 7053], "text": ["Use a string attribute on the target points to set the reference prim name. Set the attribute name."]}], "indent": 0, "text": ["Use Name Attribute"], "role": "item", "attrs": {"id": "usenameattrib"}, "extent": [6904, 6924], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7090, 7324], "text": ["When ", {"text": ["Use name attribute"], "type": "ui"}, " is on, the name of a string attribute on each point containing the name to use for the prim created at that point. If this attribute doesn\u2019t exist, the node falls back to using ", {"text": ["Instance base name"], "type": "ui"}, "."]}, {"indent": 4, "type": "para", "extent": [7324, 7468], "text": ["If the names in the attribute aren\u2019t unique, the node will only create one reference per name. In this case the node will show a warning."]}], "indent": 0, "text": ["Name Attribute"], "role": "item", "attrs": {"id": "nameattrib"}, "extent": [7053, 7069], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Prototypes "], "type": "sep", "extent": [7468, 7487], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [7532, 7652], "text": ["Whether the prim(s) you want to reference/instance onto the points is/are in the first input or the second input. "]}], "indent": 0, "text": ["Prototype Source"], "role": "item", "attrs": {"id": "protosourcemode"}, "extent": [7487, 7506], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7693, 8033], "text": ["If ", {"text": ["Prototype source"], "type": "ui"}, " is \"Second input\" and this is on, the node just put everything in the second input\u2019s scene graph tree under a new prim and use that as a prototype. This lets you build a node chain that just builds the prototype and connect it to the second input, and not have to specify which prim in the second input to use."]}], "indent": 0, "text": ["Use Entire Stage"], "role": "item", "attrs": {"id": "protouseroot"}, "extent": [7652, 7670], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8068, 8246], "text": ["When ", {"text": ["Use entire stage"], "type": "ui"}, " is on, this sets the ", {"fragment": "#kinds", "text": ["kind"], "value": "/solaris/usd#kinds", "fullpath": "/solaris/usd#kinds", "scheme": null, "type": "link"}, " of the prim the node creates as a parent for root prims from the second input. The default is None."]}], "indent": 0, "text": ["Root Kind"], "role": "item", "attrs": {"id": "protorootkind"}, "extent": [8033, 8044], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8321, 8491], "text": ["If ", {"text": ["Prototype source"], "type": "ui"}, " is \"Second input\" and this is on, the node sets the visibility of the prims used as primitives to \"hidden\" in the output. The default is on."]}], "indent": 0, "text": ["Make Prototype Source Primitives Invisible"], "role": "item", "attrs": {"id": "hideprotosourceprims"}, "extent": [8246, 8290], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8536, 8695], "text": ["The scene graph path(s) of the primitive(s) you want to use as prototype(s). You can use ", {"text": ["pattern syntax"], "fullpath": "/solaris/pattern", "scheme": null, "type": "link", "value": "/solaris/pattern"}, " to select multiple primitives."]}], "indent": 0, "text": ["Prototype Primitives"], "role": "item", "attrs": {"id": "protopattern"}, "extent": [8491, 8513], "type": "parameters_item"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [8748, 8802], "text": ["Choose the prototype at each point randomly."]}], "indent": 4, "type": "dt", "extent": [8736, 8748], "text": ["Random"]}, {"body": [{"indent": 8, "type": "para", "extent": [8813, 8982], "text": ["Specify a single prototype to use at each point in a parameter. This lets you drive the parameter using an expression (for example, based on a context option)."]}], "indent": 4, "type": "dt", "extent": [8802, 8813], "text": ["Index"]}, {"body": [{"indent": 8, "type": "para", "extent": [9003, 9111], "text": ["Use the value of an integer attribute on the target point as an index into the list of prototypes."]}], "indent": 4, "type": "dt", "extent": [8982, 9003], "text": ["Index Attribute"]}, {"body": [{"indent": 8, "type": "para", "extent": [9131, 9370], "text": ["Use the value of a string attribute to select the prototype by name. (The name of each prototype is copied from the original prim used to create the prototype. The node may add numbers to the prototype names to make them unique.)"]}], "indent": 4, "type": "dt", "extent": [9111, 9131], "text": ["Name Attribute"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Prototype Index"], "role": "item", "attrs": {"id": "protoindexsrc"}, "extent": [8695, 8712], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9391, 9476], "text": ["When ", {"text": ["Prototype index"], "type": "ui"}, " is \"Random\", the seed for the random number generator."]}], "indent": 0, "text": ["Seed"], "role": "item", "attrs": {"id": "seed"}, "extent": [9370, 9376], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9499, 9707], "text": ["When ", {"text": ["Prototype index"], "type": "ui"}, " is \"Index\", the index of the prototype to use, from the list of primitives in ", {"text": ["Prototype primitives"], "type": "ui"}, ". You can use an expression to choose the index based on some other factor."]}], "indent": 0, "text": ["Index"], "role": "item", "attrs": {"id": "index"}, "extent": [9476, 9483], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9744, 9828], "text": ["An integer attribute on the target points that specifies the prototype to use."]}], "indent": 0, "text": ["Index Attribute"], "role": "item", "attrs": {"id": "indexattr"}, "extent": [9707, 9724], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9863, 9959], "text": ["A string attribute on the template points that specifies the name of the prototype to use."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [9969, 10213], "text": ["USD Point Instancer primitives don\u2019t inherently have the ability to address prototypes by name. This node finds the prototype by name, then sets the corresponding index in the ", {"text": ["protoIndices"], "type": "code"}, " array attribute on the point instancer prim."]}], "indent": 4, "role": "item", "type": "note", "extent": [9959, 9969]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Name Attribute"], "role": "item", "attrs": {"id": "nameattr"}, "extent": [9828, 9844], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [2462, 2474], "container": true, "type": "parameters_section", "id": "parameters"}], "summary": ["Instances or copies primitives onto points."], "type": "root", "attrs": {"version": null, "namespace": null, "internal": "instancer", "context": "lop", "type": "node", "icon": "SOP/copytopoints"}, "title": ["Instancer"]}