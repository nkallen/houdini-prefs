{"body": [{"indent": 0, "text": ["Wedge"], "type": "title", "extent": [70, 80], "level": 0}, {"indent": 0, "type": "summary", "extent": [80, 139], "text": ["Creates work items with varying attribute values."]}, {"body": [{"indent": 0, "type": "para", "extent": [162, 344], "text": ["A wedge render generates multiple versions of an image or piece of geometry, with different settings, to help you choose the best looking option from a range of possible settings."]}, {"indent": 0, "type": "para", "extent": [344, 500], "text": ["In TOPs, we accomplish this by generating separate work items for each separate variant, with the varied settings stored as ", {"text": ["attributes"], "fullpath": "/tops/attributes", "scheme": null, "type": "link", "value": "/tops/attributes"}, "."]}, {"indent": 0, "type": "para", "extent": [500, 693], "text": ["The Wedge TOP generates these work items. It can generate variations of multiple attributes at once. It can vary settings across a range, choose from a list of values, or pick random values."]}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [139, 162], "container": true, "type": "h", "id": "oview"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [782, 973], "text": ["Since render TOP nodes generate per-frame work items ", {"text": ["for each incoming work item"], "type": "em"}, ", render nodes that come after the wedge will generate render items for each frame with each variation."]}], "indent": 0, "text": ["Add a ", {"text": ["Wedge node"], "fullpath": "/nodes/top/wedge", "scheme": "Node", "type": "link", "value": "/nodes/top/wedge"}, " ", {"text": ["before"], "type": "em"}, " your render node(s)."], "extent": [714, 782], "blevel": 2, "type": "ord"}, {"indent": 0, "blevel": 2, "type": "ord", "extent": [973, 1260], "text": ["On the Wedge TOP, use the ", {"text": ["Wedge attributes"], "type": "ui"}, " multi-parm to set up the attribute or attributes you want to vary. You can use these, for example, in ", {"text": ["attribute references"], "fullpath": "/tops/attributes", "scheme": null, "type": "link", "value": "/tops/attributes"}, " on the render node to vary render settings, or in an network or HDA called by the TOP network."]}, {"indent": 0, "blevel": 2, "type": "ord", "extent": [1260, 1362], "text": ["Click the ", {"text": "", "fullpath": "/nodes/top/BUTTONS/plus", "scheme": "Icon", "type": "link", "value": "BUTTONS/plus"}, " add button next to ", {"text": ["Wedge attributes"], "type": "ui"}, " to add a new wedge variable."]}, {"indent": 0, "blevel": 2, "type": "ord", "extent": [1362, 1420], "text": ["Set the ", {"text": ["Attribute name"], "type": "ui"}, " of the new wedge variable."]}], "container": true, "type": "ord_group"}], "indent": 0, "level": 2, "text": ["How to"], "extent": [693, 714], "container": true, "type": "h", "id": "howto"}, {"body": [{"indent": 0, "type": "para", "extent": [1447, 1549], "text": ["For each wedged attribute, you can use it to set a parameter on the render node in one of two ways:"]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1743, 1954], "text": ["Pull references are very convenient and flexible. However, it does require using TOPs-specific expressions, so it may not be appropriate if you want the ROP node to also be usable manually or without TOPs."]}, {"indent": 4, "type": "para", "extent": [1954, 1964], "text": [{"text": ["or"], "type": "em"}]}], "indent": 0, "text": ["On the render node or any other node cooked by the render, you can use ", {"text": ["@attribute"], "type": "code"}, " references in parameter expressions to \"pull\" attribute values from the work item."], "attrs": {"glyph": "fa-arrow-up"}, "extent": [1549, 1718], "blevel": 2, "type": "bullet"}, {"body": [{"indent": 4, "type": "para", "extent": [2236, 2404], "text": ["This lets you wedge values in the scene without having to use TOPs-only expressions in its parameters, so the node can still be rendered manually or without TOPs."]}, {"indent": 4, "type": "para", "extent": [2404, 2707], "text": ["Turn on ", {"text": ["Target parameter"], "type": "ui"}, ". Click the ", {"text": "", "fullpath": "/nodes/top/BUTTONS/chooser_node", "scheme": "Icon", "type": "link", "value": "BUTTONS/chooser_node"}, " chooser icon next to the target parameter field to choose a parameter to override interactively. The Wedge creates special attributes that tell render TOPs to render with the overrides at runtime, so the HIP file is not affected."]}, {"indent": 4, "type": "para", "extent": [2707, 2874], "text": ["See the the help for the ", {"text": ["Overwrite Target Parameter on Work Item Selection"], "type": "ui"}, " parameter for how you can preview pushed attributes, and the trade-offs involved."]}], "indent": 0, "text": ["On the Wedge TOP, you can explicitly specify node parameters in the scene to \"push\" the attribute value into at render time. This creates special attributes the render node knows to use at render time to override the specific node parameters."], "attrs": {"glyph": "fa-arrow-down"}, "extent": [1964, 2209], "blevel": 2, "type": "bullet"}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Pull vs. push"], "extent": [1420, 1447], "container": true, "type": "h", "id": "push"}, {"body": [{"indent": 0, "type": "para", "extent": [2890, 3040], "text": ["In addition to the attributes created using the ", {"text": ["Wedge Attributes"], "type": "ui"}, " parameters,\nthe following common attributes will be added to Wedge work items:"]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3072, 3178], "text": ["An index that identifies the wedge variation on the work item. This is unique within the Wedge node."]}], "indent": 0, "text": [{"text": ["wedgeindex"], "type": "code"}], "role": "item", "attrs": {"type": "int"}, "extent": [3040, 3056], "type": "top_attributes_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3218, 3581], "text": ["The wedge variation number, which has values that range from 0 to ", {"text": ["Wedge Count"], "type": "ui"}, ". When there are no inputs to the Wedge node this value is the same as the ", {"text": ["wedgeindex"], "type": "code"}, " attribute. When generating nested wedges, however, there can be multiple work items with the same ", {"text": ["wedgenum"], "type": "code"}, " since the node will generate ", {"text": ["Wedge Count"], "type": "ui"}, " items for each upstream work item."]}, {"indent": 4, "type": "para", "extent": [3581, 3817], "text": ["If the ", {"text": ["Preserve Wedge Numbers"], "type": "ui"}, " toggle is enabled ", {"text": ["wedgenum"], "type": "code"}, " is an array that contains all of the different values across multiple levels of wedging. ", {"text": ["wedgenum[0]"], "type": "code"}, " is the first level of wedging, ", {"text": ["wedgenum[1]"], "type": "code"}, " is the second, etc."]}], "indent": 0, "text": [" ", {"text": ["wedgenum"], "type": "code"}], "role": "item", "attrs": {"type": "int or [int]"}, "extent": [3178, 3193], "type": "top_attributes_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3853, 3921], "text": ["An list of attribute names that are being wedged by this node."]}], "indent": 0, "text": [{"text": ["wedgeattribs"], "type": "code"}], "role": "item", "attrs": {"type": "[str]"}, "extent": [3817, 3835], "type": "top_attributes_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3963, 4420], "text": ["If you choose to \"push\" an attribute into a ROP parameter by turning on ", {"text": ["Target parameter"], "type": "ui"}, ", the node adds an ", {"text": [{"text": ["attribute"], "type": "var"}, "channel"], "type": "code"}, " attribute (for example, if the attribute is named ", {"text": ["scale"], "type": "code"}, ", the node also creates a ", {"text": ["scalechannel"], "type": "code"}, " attribute). This attribute contains the path to the parameter to override. (The render TOPs know to overwrite the parameter specified in this attribute at render time if this type of attribute exists on the work item.)"]}], "indent": 0, "text": [{"text": [{"text": ["attribute"], "type": "var"}, "channel"], "type": "code"}], "role": "item", "attrs": {"type": "str"}, "extent": [3921, 3947], "type": "top_attributes_item"}], "container": true, "role": "item_group", "type": "top_attributes_item_group"}], "indent": 0, "level": 1, "text": "Top_attributes", "role": "section", "extent": [2874, 2890], "container": true, "type": "top_attributes_section", "id": "top_attributes"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [71, 319], "text": ["Whether this node generates ", {"fragment": "#static", "text": ["static or dynamic"], "value": "/tops/intro#static", "fullpath": "/tops/intro#static", "scheme": null, "type": "link"}, " work items. You should generally leave this set to \"Automatic\" unless you know the node\u2019s work items can be computed statically, or that they need to be generated dynamically."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [332, 495], "text": ["This node always creates dynamic work items: it waits until the upstream work items are known, and generates new work items from the upstream work items."]}], "indent": 4, "type": "dt", "extent": [319, 332], "text": ["Dynamic"]}, {"body": [{"indent": 8, "type": "para", "extent": [507, 696], "text": ["This node always creates static work items: it creates the number of work items it thinks it needs based on the parameters (and any upstream static items) before the network runs."]}], "indent": 4, "type": "dt", "extent": [495, 507], "text": ["Static"]}, {"body": [{"indent": 8, "type": "para", "extent": [711, 902], "text": ["If the input is static (a static processor, or a partitioner with only static inputs, or a mapper), this node generates static work items, otherwise it generates dynamic work items."]}], "indent": 4, "type": "dt", "extent": [696, 711], "text": ["Automatic"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Work Item Generation"], "role": "item", "attrs": {"id": "pdg_workitemgeneration"}, "extent": [16, 38], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4518, 4741], "text": ["The total number of work items to create. Attributes that are defined as a range will divide themselves up into this many steps. Attributes defined by a list of values will cycle if there are more wedges than values."]}, {"indent": 4, "type": "para", "extent": [4741, 4988], "text": ["The number of work items to create. Each work item will have all of the\n    attributes from the ", {"text": ["Wedge Attributes"], "type": "ui"}, " parameter. If this node is wired\n    into another node, then it will create this many work items per upstream\n    work item."]}], "indent": 0, "text": ["Wedge Count"], "role": "item", "attrs": {"id": "wedgecount"}, "extent": [4484, 4497], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5016, 5091], "text": ["Change this number to have the node generate different random values."]}], "indent": 0, "text": ["Random Seed"], "role": "item", "attrs": {"id": "seed"}, "extent": [4988, 5001], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5137, 5466], "text": ["When this toggle is enabled, the ", {"text": ["wedgenum"], "type": "code"}, " attribute will contain a list of wedge number values from nested wedges. The ", {"text": ["wedgenum"], "type": "code"}, " value from the first level of wedging is store at index 0 in the array, the second level of wedging at index 1, and so on. When the toggle is off, only the most recent wedge number is stored."]}], "indent": 0, "text": ["Preserve Wedge Numbers"], "role": "item", "attrs": {"id": "preservenum"}, "extent": [5091, 5115], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5517, 5616], "text": ["Copy the variation attributes into environment variables in each work item\u2019s job environment."]}], "indent": 0, "text": ["Export To Environment"], "role": "item", "attrs": {"id": "exportenvironment"}, "extent": [5466, 5489], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5694, 6458], "text": ["If you use the ", {"text": ["Target parameter"], "type": "ui"}, " checkbox on a variable to \"", {"fragment": "#push", "text": ["push"], "value": "/tops/attributes#push", "fullpath": "/tops/attributes#push", "scheme": null, "type": "link"}, "\" the variable into a ROP parameter, you can turn this on to do that push whenever you select a work item in the network editor. This gives you the same previewing effect as using \"", {"fragment": "#pull", "text": ["pull"], "value": "/tops/attributes#pull", "fullpath": "/tops/attributes#pull", "scheme": null, "type": "link"}, "\" references. However, the way this works is to actually change the value of the target parameter, so it will cause recooks and mark the HIP file as unsaved, and saving the HIP file will save the \"previewed\" changes. The current value of the parameter is saved on the wedge TOP when the target parameter is selected, and is restored on work item deselection. It is possible to manually capture or restore values using the ", {"text": ["Capture"], "type": "ui"}, " and ", {"text": ["Restore"], "type": "ui"}, " buttons."]}, {"indent": 4, "type": "para", "extent": [6458, 6643], "text": ["Note that this parameter only affects the active Houdini Session. When the network actually runs, it calls the ROP with the \"pushed\" values without affecting the current HIP file."]}], "indent": 0, "text": ["Overwrite Target Parameter on Work Item Selection"], "role": "item", "attrs": {"id": "previewselection"}, "extent": [5616, 5667], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6687, 6731], "text": ["Sets the number of wedged attributes."]}], "indent": 0, "text": ["Wedge Attributes"], "role": "item", "attrs": {"id": "wedgeattributes"}, "extent": [6643, 6661], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Per-attribute parameters "], "type": "sep", "extent": [6731, 6766], "level": 4}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [6798, 6839], "text": ["The name of the attribute to wedge."]}], "indent": 0, "text": ["Attribute Name"], "role": "item", "attrs": {"id": "name"}, "extent": [6766, 6783], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6875, 7324], "text": ["If you turn this on, the attribute will be \"pushed\" into the target parameter. Click the chooser icon to the right of the field to interactively choose the node and parameter to override. If ", {"text": ["Overwrite Target Parameter on Work Item Selection"], "type": "ui"}, " is enabled, the ", {"text": ["Captured Value"], "type": "ui"}, " field will store the original value of the parameter. The captured value can be reacquired using the ", {"text": ["Capture"], "type": "ui"}, " button, and restored using the ", {"text": ["Restore"], "type": "ui"}, " button."]}], "indent": 0, "text": ["Target Parameter"], "role": "item", "attrs": {"id": "channel"}, "extent": [6839, 6857], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7355, 7522], "text": ["The attribute data type: \"Float\", \"Float Vector\", \"Integer\", \"Integer Vector\", \"String\", or \"Color\". (Use Float/Integer Vector for any vector size, two to four)."]}], "indent": 0, "text": ["Attribute Type"], "role": "item", "attrs": {"id": "type"}, "extent": [7324, 7340], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7554, 7594], "text": ["How to generate the wedged values."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [7605, 7814], "text": ["Distributes values evenly along the range between a start and end value. If you turn on ", {"text": ["Random samples"], "type": "ui"}, ", the node chooses the values randomly from within the range, rather than distributed evenly."]}], "indent": 4, "type": "dt", "extent": [7594, 7605], "text": ["Range"]}, {"body": [{"indent": 8, "type": "para", "extent": [7825, 8002], "text": ["Sets the attribute to the value of the ", {"text": ["Value"], "type": "ui"}, " parameter below. This can be a constant value, or an expression that the node evaluates separately for each work item."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [8015, 8264], "text": ["In the expression you can channel reference the ", {"text": ["wedgecount"], "type": "code"}, " parameter to get the total number of wedges, and use the ", {"text": ["@wedgeindex"], "type": "code"}, " to get the index of the current work item. For example, to generate values in the shape of a sine wave:"]}, {"lang": null, "indent": 12, "type": "pre", "extent": [8264, 8361], "text": ["\n            sin(@wedgeindex / (ch(\"wedgecount\") - 1) * 180 + 90)\n            "]}], "indent": 8, "role": "item", "type": "tip", "extent": [8002, 8015]}], "container": true, "role": "item_group", "type": "tip_group"}], "indent": 4, "type": "dt", "extent": [7814, 7825], "text": ["Value"]}, {"body": [{"indent": 8, "type": "para", "extent": [8378, 8565], "text": ["Cycles through the values specified in the ", {"text": ["Values"], "type": "ui"}, " multi-parm below. If you turn on ", {"text": ["Random samples"], "type": "ui"}, ", the node chooses from the list randomly instead of iterating over it. "]}], "indent": 4, "type": "dt", "extent": [8361, 8378], "text": ["Value List"]}, {"body": [{"indent": 8, "type": "para", "extent": [8578, 9038], "text": ["Distributes the values in a range specified by a center value and an offset. To ensure that the center value is included on one of the work items, an odd ", {"text": ["Wedge Count"], "type": "ui"}, " is necesary. If you turn on ", {"text": ["Random Samples"], "type": "ui"}, ", the node chooses the values randomly instead of distributing them evenly. The first ", {"text": ["wedge_count/2"], "type": "code"}, " values are chosen from the range ", {"text": ["[center-offset, center]"], "type": "code"}, ", and the remaining values are chosen from the opposite side of the range."]}], "indent": 4, "type": "dt", "extent": [8565, 8578], "text": ["Bracket"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Wedge Type"], "role": "item", "attrs": {"id": "wedgetype"}, "extent": [7522, 7534], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9071, 9166], "text": ["When ", {"text": ["Wedge type"], "type": "ui"}, " is \"Range\", \"Value List\" or \"Bracket\", generate the values randomly."]}], "indent": 0, "text": ["Random Samples"], "role": "item", "attrs": {"id": "random"}, "extent": [9038, 9054], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [4420, 4432], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [9175, 9204], "text": [{"text": "", "fullpath": "/nodes/top/attributecreate", "scheme": "Node", "type": "link", "value": "/nodes/top/attributecreate"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [9204, 9233], "text": [{"text": "", "fullpath": "/nodes/top/attributedelete", "scheme": "Node", "type": "link", "value": "/nodes/top/attributedelete"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [9233, 9255], "text": [{"text": "", "fullpath": "/nodes/top/ropfetch", "scheme": "Node", "type": "link", "value": "/nodes/top/ropfetch"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [9166, 9175], "container": true, "type": "related_section", "id": "related"}], "title": ["Wedge"], "summary": ["Creates work items with varying attribute values."], "attrs": {"version": null, "namespace": null, "internal": "wedge", "context": "top", "type": "node", "icon": "ROP/wedge"}, "included": ["/nodes/top/processor_common"], "type": "root"}