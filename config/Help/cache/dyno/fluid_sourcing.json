{"body": [{"indent": 0, "text": ["Fluid sourcing"], "type": "title", "extent": [0, 19], "level": 0}, {"indent": 0, "type": "para", "extent": [19, 366], "text": ["Since Houdini 12, the preferred method for sourcing is to generate and modify the source fields in a surface network (SOPs) and then import them into the dynamics network (DOPs) and connect them to the fourth (\"sourcing\") input of the ", {"text": ["Pyro solver"], "fullpath": "/nodes/dop/pyrosolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/pyrosolver"}, ", ", {"text": ["Smoke solver"], "fullpath": "/nodes/dop/smokesolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/smokesolver"}, ", or ", {"text": ["FLIP solver"], "fullpath": "/nodes/dop/flipsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipsolver"}, "."]}, {"indent": 0, "type": "para", "extent": [366, 513], "text": ["(For pyro effects, the source geometry is used to generate a fog volume. For FLIP fluids, the source geometry is used to generate an SPH volume.)"]}, {"indent": 0, "type": "para", "extent": [513, 836], "text": ["This allows you to use the full power of the surface node network to noise-ify, combine, edit, etc. the source volume (for example, using the ", {"text": ["Volume Mix surface node"], "fullpath": "/nodes/sop/volumemix", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumemix"}, ") as well as set up attributes such as velocity (", {"text": ["V"], "type": "code"}, ") before you import the geometry. The sources must be volumes and mapped correctly."]}, {"body": [{"indent": 0, "type": "para", "extent": [847, 1350], "text": ["The previous Pyro method for specifying the source volume (merging the pyro object and source volume in DOPs with a \"source\" relationship or using ", {"text": ["Source apply"], "fullpath": "/nodes/dop/sourceapply", "scheme": "Node", "type": "link", "value": "/nodes/dop/sourceapply"}, ") is still available for backwards compatibility (on the Pyro solver\u2019s ", {"fragment": "#relationships", "text": ["Relationships"], "value": "#relationships", "fullpath": "/dyno/fluid_sourcing#relationships", "scheme": null, "type": "link"}, " tab, turn on ", {"text": ["Enable relationships"], "type": "ui"}, "). This is still useful when sourcing from simulated objects. However in most cases the new sourcing input is the preferred method for its much greater flexibility and efficiency."]}, {"indent": 0, "type": "para", "extent": [1350, 1576], "text": ["The default Pyro setup copies the initial source volume into the ", {"text": ["fuel"], "type": "code"}, " and ", {"text": ["temperature"], "type": "code"}, " fields of the pyro object. You can use additional tools such as ", {"text": ["Expand from objects"], "fullpath": "/shelf/expandfromobjects", "scheme": null, "type": "link", "value": "/shelf/expandfromobjects"}, " to affect other fields."]}], "indent": 0, "level": 2, "text": ["Pyro"], "extent": [836, 847], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [1594, 1753], "text": ["The data flow for the connection between the ", {"text": ["FLIP Source SOP"], "fullpath": "/nodes/sop/flipsource", "scheme": "Node", "type": "link", "value": "/nodes/sop/flipsource"}, " and the ", {"text": ["Volume Source DOP"], "fullpath": "/nodes/dop/volumesource", "scheme": "Node", "type": "link", "value": "/nodes/dop/volumesource"}, " for particle fluids is:"]}, {"body": [{"body": [{"indent": 0, "text": ["In FLIP Source SOP "], "role": "td", "extent": [1753, 1774], "type": "cell"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "ord", "extent": [1774, 1843], "text": ["Create surface SDF field and velocity fields as for pyro."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [1843, 1945], "text": ["Create particles inside surface SDF with specified particle separation, jitter, and so on."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [1945, 2061], "text": ["Sample the velocity field onto particles' ", {"text": ["v"], "type": "code"}, " (velocity) attribute (this is the last use of velocity field)."]}], "container": true, "type": "ord_group"}], "role": "td", "type": "cell"}], "divider": false, "type": "row"}, {"body": [{"indent": 0, "text": ["In Volume Source DOP "], "role": "td", "extent": [2061, 2084], "type": "cell"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "ord", "extent": [2084, 2141], "text": ["Import surface field and particles into DOPs."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [2141, 2298], "text": ["Delete any incoming particles that overlap with the existing FLIP surface. (This is a fast test to avoid emitting where particles already exist.)"]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [2298, 2358], "text": ["Merge the new particles with existing particles."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [2358, 2438], "text": ["Union the emitter\u2019s surface field with the existing FLIP surface field. "]}], "container": true, "type": "ord_group"}], "role": "td", "type": "cell"}], "divider": false, "type": "row"}], "type": "table", "thead": []}], "indent": 0, "level": 2, "text": ["FLIP Fluids"], "extent": [1576, 1594], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [2450, 2574], "text": ["The following shelf tools let you convert selected objects into different types of fields in a Pyro or FLIP fluid effect:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [2574, 2605], "text": [{"text": "", "fullpath": "/shelf/flipfluidfromobject", "scheme": null, "type": "link", "value": "/shelf/flipfluidfromobject"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2605, 2634], "text": [{"text": "", "fullpath": "/shelf/emitparticlefluid", "scheme": null, "type": "link", "value": "/shelf/emitparticlefluid"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2634, 2663], "text": [{"text": "", "fullpath": "/shelf/sinkfromobjects", "scheme": null, "type": "link", "value": "/shelf/sinkfromobjects"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2663, 2803], "text": ["See the ", {"text": ["help for the FLIP Source surface node"], "fullpath": "/nodes/sop/flipsource", "scheme": "Node", "type": "link", "value": "/nodes/sop/flipsource"}, " and the ", {"text": ["help for the Volume Source DOP node"], "fullpath": "/nodes/dop/volumesource", "scheme": "Node", "type": "link", "value": "/nodes/dop/volumesource"}, "."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2803, 2861], "text": ["See the ", {"text": ["help on working with volumes"], "fullpath": "/model/volumes", "scheme": null, "type": "link", "value": "/model/volumes"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Tools"], "extent": [2438, 2450], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3080, 3178], "text": ["Static SOP sources without noise don\u2019t need to be cached, since they are only computed once."]}], "indent": 0, "text": ["If you are sourcing from SOPs, you should cache the sources before running the simulation, especially when the source volume is high resolution. Caching ensures the SOP chain doesn\u2019t re-cook every frame."], "extent": [2872, 3080], "blevel": 2, "type": "bullet"}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [3178, 3427], "text": ["If you are using relationships (not the \"sourcing\" input) and the source object deforms (or collides with a deforming object), go to the ", {"text": ["Advanced \u25b8 Forces \u25b8 Sources"], "type": "ui"}, " subtab of the solver node and set the ", {"text": ["Velocity Type"], "type": "ui"}, " to \"Point Velocity\"."]}, {"body": [{"indent": 4, "type": "para", "extent": [3566, 3695], "text": ["For example, if you created a polygonal tube, you could add a ", {"text": ["Point node"], "fullpath": "/nodes/sop/point", "scheme": "Node", "type": "link", "value": "/nodes/sop/point"}, " which set the ", {"text": ["Velocity"], "type": "ui"}, " to"]}, {"indent": 4, "type": "para", "extent": [3695, 3752], "text": [{"text": ["fit01($BBX, -1, 1)"], "type": "code"}, ", ", {"text": ["1"], "type": "code"}, ", ", {"text": ["fit01($BBZ, -1, 1)"], "type": "code"}]}, {"indent": 4, "type": "para", "extent": [3752, 4019], "text": ["This would create upward velocity (", {"text": ["1"], "type": "code"}, " in the Y direction) with velocity vectors flared outward (the ", {"text": "", "value": "/expressions/fit01", "fallback_text": "fit01()", "fullpath": "/expressions/fit01", "scheme": "Exp", "type": "link"}, " expressions scale the position of each point within the bounding box of the input geometry (", {"text": ["$BBX"], "type": "code"}, " and ", {"text": ["$BBZ"], "type": "code"}, ") to fit within the range ", {"text": ["-1"], "type": "code"}, " to ", {"text": ["1"], "type": "code"}, ")."]}], "indent": 0, "text": ["You can set the velocity attribute (", {"text": ["v"], "type": "code"}, ") on the source geometry and the pyro solver will pick it up and apply it to the simulation."], "extent": [3427, 3566], "blevel": 2, "type": "bullet"}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [4019, 4137], "text": ["See ", {"text": ["pyro look development"], "fullpath": "/pyro/pyro_look", "scheme": null, "type": "link", "value": "/pyro/pyro_look"}, " for tips on how to use the source to change the look of a pyro effect."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Tips"], "extent": [2861, 2872], "container": true, "type": "h", "id": null}], "type": "root", "attrs": {}, "title": ["Fluid sourcing"]}